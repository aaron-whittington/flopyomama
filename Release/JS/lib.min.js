var AWModel=Backbone.Model.extend({className:"AWModel",constructor:function(){var a=arguments,b;0<a.length&&(_.isString(a[0])?b=this._stringToPrm(a):_.isNumber(a[0])?b=this._numToPrm(a):_.isArray(a[0])&&(b=this._arrToPrm(a)));_.isUndefined(b)?Backbone.Model.apply(this,a):Backbone.Model.apply(this,[b])},toggle:function(a){var b=!this.get(a);this.set(a,b);return b},_numToPrm:function(){},_arrToPrm:function(){},_stringToPrm:function(){},toString:function(){},toDisplayString:function(){return this.toString()},
test:function(){json=JSON.stringify(this.toJSON());sInter=this.toString();sExter=this.toDisplayString();nsUtil.fLog("TEST: "+this.className+" id: "+this.id);nsUtil.fLog("\tJSON:\t"+json);nsUtil.fLog("\ttoString:\t"+sInter);nsUtil.fLog("\ttoDisplayString:\t"+sExter)}}),AWCollection=Backbone.Collection.extend({className:"AWCollection",constructor:function(){var a=arguments;if(0<a.length){a[0].bAWUnpack&&(a=a[0]);var b;_.isString(a[0])?b=this._stringToPrm(a):_.isNumber(a[0])?b=this._numToPrm(a):_.isObject(a[0])&&
!_.isArray(a[0])&&(b=this._objToPrm(a))}_.isUndefined(b)?Backbone.Collection.apply(this,a):Backbone.Collection.apply(this,[b])},_numToPrm:function(){},_objToPrm:function(){},_stringToPrm:function(){},_prepareModel:function(a,b){if(a instanceof Backbone.Model)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},toString:function(){var a="";this.forEach(function(b){a+=b.toString()});return a},
toDisplayString:function(a){var b="";this.forEach(function(a){b+=a.toDisplayString();b+=" "});return b},test:function(){var a=this.toJSON();json=JSON.stringify(a);sInter=this.toString();sExter=this.toDisplayString();nsUtil.fLog("TEST: "+this.className+" id: "+this.id);nsUtil.fLog("\tJSON:\t"+json);nsUtil.fLog("\ttoString:\t"+sInter);nsUtil.fLog("\ttoDisplayString:\t"+sExter)}}),AWCollectionModel=AWModel.extend({className:"AWCollectionModel",_collection:null,getCollection:function(){return this._collection},
constructor:function(){var a=arguments;a.bAWUnpack=!0;this._collection=new this.collection(a)},collection:AWCollection,_numToPrm:function(){return this._collection._numToPrm()},_objToPrm:function(){return this._collection._objToPrm()},_stringToPrm:function(){return this._collection._stringToPrm()},toString:function(){return this._collection.toString()},toDisplayString:function(){return this._collection.toDisplayString(!0)},test:function(){this._collection.test()},toJSON:function(){return this._collection.toJSON()}});"strict mode";var AWView=Backbone.View.extend({className:"AWView",constructor:function(){Backbone.View.apply(this,arguments)}});var KnownCards=Backbone.Model.extend({defaults:{aCards:[]},initialize:function(){this.on("change:aCards",function(){});this.on("finalize",function(a){_.isNull(a)&&this.get("value");Router.navigate("board="+JSON.stringify(this.value),{trigger:!1})});this.on("loadFromRoute",function(a){_.isNull(a)})}}),KnownCardsView=Backbone.View.extend({initialize:function(){v;this.render()},render:function(){},update:function(){}});var Card=AWModel.extend({className:"Card",_stringToPrm:function(a){var b=a[0];if(2!=b.length)throw"card constructor called with invalid prop: "+prm[0];a=b[0].toUpperCase();b=b[1].toUpperCase();a=nsConvert.rankCharToNumber(a);b=nsConvert.suitCharToNumber(b);return{rank:a,suit:b}},_numToPrm:function(a){return{rank:a[0],suit:a[1]}},initialize:function(){},rankNumberToChar:function(){var a=this.get("rank");return nsConvert.rankNumberToChar(a)},suitToDisplayChar:function(){var a=this.get("suit");return nsConvert.suitToDisplayChar(a)},
suitToChar:function(){var a=this.get("suit");return nsConvert.suitToChar(a)},toString:function(){return this.rankNumberToChar()+this.suitToChar()},toDisplayString:function(){return this.rankNumberToChar()+this.suitToDisplayChar()}}),CardList=AWCollection.extend({className:"CardList",_stringToPrm:function(a){var b=[],c=a[0];if(-1==c.indexOf(",")){a=c.length;for(var d=0;d<a-2;d+=2)b.push(new Card(c.substring(d,d+2)))}else for(c=c.split(","),a=c.length,d=0;d<a;d++)b.push(new Card(c[d]));return b},model:Card,
_objToPrm:function(a){var b=[];a=a[0];for(var c=a.length,d=0;d<c;d++)b.push(new Card(a[d]));return b}}),CardListModel=AWCollectionModel.extend({className:"CardListModel",collection:CardList}),CardListList=AWCollection.extend({className:"CardListList",model:CardListModel});var nsConvert={},fGetRandomCards=function(a){var b=fGetAllUnknownCards();aReturnCards=[];for(aReturnCardIndex=[];aReturnCards.length<a;){var c=Math.floor(Math.random()*b.length);0>jQuery.inArray(c,aReturnCardIndex)&&(aReturnCardIndex.push(c),aReturnCards.push(b[c]))}return aReturnCards},fWrapPair=function(a,b,c){return"<div class = 'pair_string "+(b?"disabled":"")+(c?"selected":"")+" '>"+a+"</div>"},fGetCardPairFromString=function(a){var b={};2==a.length&&a[0]==a[1]?(b.rank1=nsConvert.rankCharToNumber(a[0]),
b.rank2=nsConvert.rankCharToNumber(a[1]),b.suited=!0,b.comb=6):3==a.length&&"s"==a[2]?(b.rank1=nsConvert.rankCharToNumber(a[0]),b.rank2=nsConvert.rankCharToNumber(a[1]),b.suited=!0,b.comb=4):(b.rank1=nsConvert.rankCharToNumber(a[0]),b.rank2=nsConvert.rankCharToNumber(a[1]),b.suited=!1,b.comb=12);return b};
nsConvert.fGetCardArrayFromPair=function(a,b){var c=[],d=[];a.rank1==a.rank2?(c.push({rank:a.rank2,suit:1}),c.push({rank:a.rank2,suit:2}),c.push({rank:a.rank2,suit:3}),c.push({rank:a.rank2,suit:4})):(c.push({rank:a.rank2,suit:1}),c.push({rank:a.rank2,suit:2}),c.push({rank:a.rank2,suit:3}),c.push({rank:a.rank2,suit:4}),c.push({rank:a.rank1,suit:1}),c.push({rank:a.rank1,suit:2}),c.push({rank:a.rank1,suit:3}),c.push({rank:a.rank1,suit:4}));d=fCombinatorics(c,2);for(c=0;c<d.length;c++)d[c].sort(function(a,
b){return a.rank!=b.rank?b.rank-a.rank:b.suit-a.suit});d.sort(function(a,b){if(a[0].rank!=b[0].rank)return b[0].rank-a[0].rank;if(a[0].suit!=b[0].suit)return b[0].suit-a[0].suit});aKnownFiltered=[];if("object"==typeof b)for(aKnown=b,c=0;c<d.length;c++){var e=!0;for(j=0;j<aKnown.length;j++)if(d[c][0].rank==aKnown[j].rank&&d[c][0].suit==aKnown[j].suit||d[c][1].rank==aKnown[j].rank&&d[c][1].suit==aKnown[j].suit)e=!1;!0===e&&aKnownFiltered.push(d[c])}else aKnownFiltered=d;if(a.rank1==a.rank2)return aKnownFiltered;
d=[];e=[];for(c=0;c<aKnownFiltered.length;c++)aKnownFiltered[c][0].rank!=aKnownFiltered[c][1].rank&&(aKnownFiltered[c][0].suit==aKnownFiltered[c][1].suit?d.push(aKnownFiltered[c]):e.push(aKnownFiltered[c]));return a.suited?d:e};
var fConvertCardStringToCardObject=function(a){if("string"==typeof a)oCard={},oCard.rank=nsConvert.rankCharToNumber(a[0]),oCard.suit=nsConvert.suitCharToNumber(a[1]);else{var b=[];for(i=0;i<a.length;i++)b.push(fConvertCardStringToCardObject(a[i]));return b}return oCard},fConvertCardObjectToString=function(a){return nsConvert.rankNumberToChard(a.rank)+nsConvert.suitToDisplayChar(a.suit)};
nsConvert.fStandardize=function(a){oRule={};for(var b=[],c=a.length,d=0;d<c;d++){var e=a[d],f=e.suit;if("undefined"==typeof oRule[f]){for(var g=1,g=[],h=1;5>h;h++)"undefined"!=typeof oRule[h]&&g.push(oRule[h]);0==g.length?g=1:(g.sort().reverse(),g=g[0]+1);oRule[f]=g}b.push({rank:e.rank,suit:oRule[f]})}return b};
var fFilterCardPairArray=function(a,b,c){for(var d=b.length,e=[],f=0;f<a.length;f++){for(var g=a[f],h=g[0],k=g[1],n=!0,l=0;l<d;l++){var p=b[l];if(p.suit==h.suit&&p.rank==h.rank||p.suit==k.suit&&p.rank==k.rank){n=!1;break}}if(c)for(l=0;l<c.length;l++)if(p=c[l],p[0].suit==h.suit&&p[0].rank==h.rank&&p[1].suit==k.suit&&p[1].rank==k.rank||p[1].suit==h.suit&&p[1].rank==h.rank&&p[0].suit==k.suit&&p[0].rank==k.rank){n=!1;break}n&&e.push(g)}return e};
_.extend(nsConvert,{rankCharToNumber:function(a){return"A"==a?14:"K"==a?13:"Q"==a?12:"J"==a?11:"T"==a?10:parseInt(a)},suitCharToNumber:function(a){if("\u2663"==a)return 1;if("\u2666"==a)return 2;if("\u2665"==a)return 3;if("\u2660"==a)return 4;if("C"==a)return 1;if("H"==a)return 2;if("S"==a)return 3;if("D"==a)return 4;throw"suit char not parsed";},rankNumberToChar:function(a){return 14==a?"A":13==a?"K":12==a?"Q":11==a?"J":10==a?"T":a.toString()},suitToDisplayChar:function(a){if(1==a)return"\u2663";
if(2==a)return"\u2666";if(3==a)return"\u2665";if(4==a)return"\u2660"},suitToChar:function(a){if(1==a)return"C";if(2==a)return"D";if(3==a)return"H";if(4==a)return"S"}});var nsDrawingHand={bIgnoreBackdoorDraws:!0,BACKDOOR_STRAIGHT_DRAW:0,BACKDOOR_FLUSH_DRAW:1,GUTSHOT_STRAIGHT_DRAW:2,OPEN_ENDED_STRAIGHT_DRAW:3,FLUSH_DRAW:4,fDrawingHandToShortString:function(a){a=nsDrawingHand.fDrawingHandToString(a);var b=a.indexOf("Draw");return a.substring(0,b-1)},fDrawingHandToString:function(a){var b="";switch(a.rank){case nsDrawingHand.BACKDOOR_STRAIGHT_DRAW:b="Backdoor Straight Draw";break;case nsDrawingHand.BACKDOOR_FLUSH_DRAW:b="Backdoor Flush Draw";break;case nsDrawingHand.GUTSHOT_STRAIGHT_DRAW:b=
"Gutshot Straight Draw";break;case nsDrawingHand.OPEN_ENDED_STRAIGHT_DRAW:b="Open Ended Straight Draw";break;case nsDrawingHand.FLUSH_DRAW:b="Flush Draw";break;default:b="ERROR UNKNOWN!!!"}return b},fHandToString:function(a){var b=nsHand.fHandToString(a);for(i=0;i<a.drawingHands.length;i++)b=b+" - "+nsDrawingHand.fDrawingHandToString(a.drawingHands[i]);return b},fGetDrawingHands:function(a){a.sort(nsHand.fCompareCard);var b=nsHand.fGetBestHand(a);b.drawingHands=[];if(b.rank>oHand.THREE_OF_A_KIND||
6<a.length||5>a.length)return b;var c=nsDrawingHand.fFindBestFlushDraw(a);a=nsDrawingHand.fFindBestStraightDraw(a);null!=c&&b.drawingHands.push(c);null!=a&&b.drawingHands.push(a);return b},fCompareHand:function(a,b){return a.rank!==b.rank?b.rank-a.rank:a.high!==b.high?b.high-a.high:a.low!==b.low?b.low-a.low:0},fFindBestFlushDraw:function(a){for(var b=[],c=1;4>=c;c++){for(var d=[],e=0;e<a.length;e++)a[e].suit==c&&d.push(a[e]);if(2<d.length){b=fPushArrayMultiDim(b,d);break}}if(0<b.length){c=[];for(e=
0;e<b.length;e++)5==a.length?4==b[e].length?c.push({rank:nsDrawingHand.FLUSH_DRAW,high:b[e][0].rank,low:b[e][b[e].length-1].rank}):3==b[e].length&&(nsDrawingHand.bIgnoreBackdoorDraws||c.push({rank:nsDrawingHand.BACKDOOR_FLUSH_DRAW,high:b[e][0].rank,low:b[e][b[e].length-1].rank})):4==b[e].length&&c.push({rank:nsDrawingHand.FLUSH_DRAW,high:b[e][0].rank,low:b[e][b[e].length-1].rank});c.sort(nsDrawingHand.fCompareHand);if(0<c.length)return c[0]}return null},fFindBestStraightDraw:function(a){var b=[];
for(iLowRank=10;1<=iLowRank;iLowRank--){var c=[];for(memberInStraight=0;5>memberInStraight;memberInStraight++){var d=iLowRank+memberInStraight;1==iLowRank&&0==memberInStraight&&(d=14);d=nsHand.fFindAllCardsWithRank(a,d);c[memberInStraight]=0<d.length?d:null}b=fPushArrayMultiDim(b,c)}c=[];for(d=0;d<b.length;d++){var e=b[d],f=-1,g=-1,h=0,k=[];for(j=0;j<e.length;j++){var n=e[j];null!=n?(h++,-1==g&&(g=n[0].rank),f=n[0].rank):k.push(j)}e=-1;4==h?e=6==a.length?nsDrawingHand.GUTSHOT_STRAIGHT_DRAW:14==f||
14==g?nsDrawingHand.GUTSHOT_STRAIGHT_DRAW:0===k[0]||4===k[0]?nsDrawingHand.OPEN_ENDED_STRAIGHT_DRAW:nsDrawingHand.GUTSHOT_STRAIGHT_DRAW:3!=h||5!=a.length||nsDrawingHand.bIgnoreBackdoorDraws||(e=nsDrawingHand.BACKDOOR_STRAIGHT_DRAW);-1!==e&&c.push({rank:e,high:f,low:g})}c.sort(nsDrawingHand.fCompareHand);return 0<c.length?c[0]:null}};var nsFilter={bEdited:!1,sOriginalJSON:"",sEditedJSON:"",nsStandard:{}};nsFilter.nsStandard.oGroup={sub_filter_type:"class_group",group_log_op:"log_op_or"};nsFilter.nsStandard.oMadeHand={sub_filter_type:"class_made_hand",comparator_op:"at_least",made_hand_op:"made_hand_0"};nsFilter.nsStandard.oDrawingHand={sub_filter_type:"class_drawing_hand",comparator_op:"at_least",drawing_hand_op:"drawing_hand_3"};nsFilter.nsStandardFilters={};
nsFilter.nsStandardFilters.filter_strong_hand={oValues:{sub_filter_type:"class_group",group_log_op:"log_op_or"},sub:[{oValues:{sub_filter_type:"class_made_hand",comparator_op:"at_least",made_hand_op:"made_hand_2"}},{oValues:{sub_filter_type:"class_drawing_hand",comparator_op:"at_least",drawing_hand_op:"drawing_hand_3"}}],name:"Strong Hand"};
nsFilter.nsStandardFilters.filter_junk={oValues:{sub_filter_type:"class_group",group_log_op:"log_op_and"},sub:[{oValues:{sub_filter_type:"class_made_hand",comparator_op:"at_most",made_hand_op:"made_hand_0"}},{oValues:{sub_filter_type:"class_drawing_hand",comparator_op:"at_most",drawing_hand_op:"drawing_hand_2"}}],name:"Junk"};
nsFilter.nsStandardFilters.filter_bluffy={oValues:{sub_filter_type:"class_group",group_log_op:"log_op_or"},sub:[{oValues:{sub_filter_type:"class_filter",sub_filter_op:"filter_strong_hand"}},{oValues:{sub_filter_type:"class_filter",sub_filter_op:"filter_junk"}}],name:"Bluffy"};nsFilter.nsStandardFilters.filter_monster={oValues:{sub_filter_type:"class_made_hand",comparator_op:"at_least",made_hand_op:"made_hand_3"},name:"Monster"};nsFilter.sFilterNamesKey="aFilters_saved";
nsFilter.fSaveFilter=function(){var a=nsFilter.fCurrentToJSON(),b="filter_"+nsFilter.nsHtml.fGetCurrentFilterNameIntern();nsUtil.fSetLocalStorage(b,a);(a=nsUtil.fGetLocalStorage(nsFilter.sFilterNamesKey))||(a=[]);-1==a.indexOf(b)&&a.push(b);nsUtil.fSetLocalStorage(nsFilter.sFilterNamesKey,a)};
nsFilter.fActiveFilter=function(a,b){if("undefined"==typeof a||null==a)a=nsFilter.fGetActiveFilter();nsUtil.fLog("now unpacking "+a);var c=nsUtil.fGetLocalStorage(a);isNot(c)&&(c=nsFilter.nsStandardFilters[a]);if(!isNot(c))return c=nsUtil.fClone(c),!0===b&&(c=nsFilter.fUnpack(c)),c};
nsFilter.fUnpack=function(a){var b=a.oValues,c=b.sub_filter_type;if("class_filter"==c)return nsFilter.fActiveFilter(b.sub_filter_op,!0);if("class_group"==c)for(b=0;b<a.sub.length;b++)a.sub[b]=nsFilter.fUnpack(a.sub[b]);return a};nsFilter.fCurrentToJSON=function(){var a=$("#filter_loaded").children().first(),a=nsFilter.fCurrentToJSONRec(a);a.name=$("#sel_filter input").val();return a};
nsFilter.fCurrentToJSONRec=function(a){var b={oValues:{}};a.find(".btn-group").first().find("li.selected").each(function(){var a=$(this).parent("ul").attr("selection-type");b.oValues[a]=$(this).find("a").attr("class")});a.next().is(".filter_group_subgroup")&&(b.sub=[],a.next().children(".row").each(function(){var a=nsFilter.fCurrentToJSONRec($(this));b.sub.push(a)}));return b};nsFilter.nsEvaluate={};nsFilter.oFilterRecord={};
nsFilter.fClearFilter=function(){$("#op_range_table td").removeClass("filtered filtered_out");$("#op_range_table .glyphicon-filter").remove();nsFilter.oFilterRecord={}};nsFilter.fGetActiveFilter=function(){var a=$("#filter_config_menu li.active");return 0==a.length?null:$(a).attr("id")};
nsFilter.fDrawFilterToBoard=function(a){for(var b in a){var c=a[b];if(0<c.length){$("#op_range_"+b).addClass("filtered");var d=fGetCardPairFromString(b);nsConvert.fGetCardArrayFromPair(d,nsUI.fGetKnownCards()).length==c.length&&$("#op_range_"+b).addClass("filtered_out");0==$("#op_range_"+b+" .glyphicon-filter").length&&$("#op_range_"+b+" .static_bg").append('<span class="glyphicon glyphicon-filter"></span>')}}};
nsFilter.nsEvaluate.fEval=function(a,b){var c=nsFilter.fActiveFilter(a);return nsFilter.nsEvaluate.fEvaluateFilter(c,b)};nsFilter.nsEvaluate.oCurrentHand=null;
nsFilter.nsEvaluate.fEvaluateFilter=function(a,b){var c={},c="array"==nsUtil.fType(b)?nsDrawingHand.fGetDrawingHands(b):b,d=nsFilter.nsEvaluate;d.oCurrentHand=c;var e=!1;switch(a.oValues.sub_filter_type){case "class_made_hand":e=d.fEvaluateMadeHand(a.oValues,c);break;case "class_drawing_hand":e=d.fEvaluateDrawingHand(a.oValues,c);break;case "class_filter":e=d.fEvaluateSubFilter(a.oValues,c);break;case "class_group":e=d.fEvaluateGroup(a,c);break;default:e=!1,console.error("filter failed")}return e};
nsFilter.nsEvaluate.fEvaluateGroup=function(a,b){var c=a.sub;if("log_op_and"==a.oValues.group_log_op){for(var d=0;d<c.length;d++){var e=nsFilter.nsEvaluate.fEvaluateFilter(c[d],b);if(!1===e)return!1}return!0}if("log_op_or"==a.oValues.group_log_op){for(d=0;d<c.length;d++)if(e=nsFilter.nsEvaluate.fEvaluateFilter(c[d],b),!0===e)return!0;return!1}};nsFilter.nsEvaluate.fEvaluateSubFilter=function(a,b){var c=a.sub_filter_op.split("_").slice(2).join("_");return nsFilter.nsEvaluate.fEval(c,b)};
nsFilter.nsEvaluate.fEvaluateMadeHand=function(a,b){var c=parseInt(a.made_hand_op.split("_")[2]);if("at_least"==a.comparator_op)return b.rank>=c?!0:!1;if("at_most"==a.comparator_op)return b.rank<=c?!0:!1};nsFilter.nsEvaluate.fEvaluateDrawingHand=function(a,b){var c=parseInt(a.drawing_hand_op.split("_")[2]),d=-1;0<b.drawingHands.length&&(d=b.drawingHands[0].rank);if("at_least"==a.comparator_op)return d>=c?!0:!1;if("at_most"==a.comparator_op)return d<=c?!0:!1};
nsFilter.fSetEditedJson=function(){nsFilter.sEditedJSON=JSON.stringify(nsFilter.fCurrentToJSON())};nsFilter.nsHtml={};nsFilter.nsHtml.fGetFilterUI=function(){var a;a='<div class="row form-group"><label id="sel_filter_label" for="sel_filter" class="col-lg-3 control-label">Select filter</label><div class="col-lg-9">';a+=nsFilter.nsHtml.fGetFilterCombobox();a+="</div>";return a+="</div>"};
nsFilter.nsHtml.fReBuildFilterMenu=function(){$("#filter_config_menu li.filter").remove();var a="",b=nsUtil.fGetLocalStorage(nsFilter.sFilterNamesKey);isNot(b)&&(b=[]);for(var c in nsFilter.nsStandardFilters)-1==b.indexOf(c)&&b.push(c);for(c=0;c<b.length;c++){var d=b[c],e=nsFilter.fActiveFilter(d).name;isNot(e)&&(e="Name Unknown");a+="<li id ='"+d+"' class='filter'>";a+="<a href='#"+d+"'>"+e+"</a>";a+="</li>"}$("#filter_config_menu").prepend(a)};
nsFilter.nsHtml.fGetFilterCombobox=function(){var a=[],b=[];$("#filter_config_menu .filter").each(function(){var c="sel_"+$(this).attr("id"),d=$(this).find("a").html(),e=d.indexOf("<"),d=0<e?d.substring(0,e):d;b.push(d);a.push(c)});return nsUI.clBootstrapCombobox("sel_filter",a,b,"Click button or type (new) name")};
nsFilter.nsHtml.fWrapSubFilterButtonGroup=function(a,b){sHtml="";sHtml+='<div class="row filter_ctrl_row">';sHtml+='<div class="filter_ctrl_col col-lg-12 ">';sHtml+=a;sHtml+="</div>";return sHtml+="</div>"};nsFilter.nsHtml.fWrapSubFilterGroup=function(a){return sHtml='<div class = "filter_group_subgroup"><img class="brace" src="Style/GullBraceLeft.svg">'+a+"</div>"};
nsFilter.nsHtml.fFilterHtmlFromSelect=function(a){var b='<div id="filter_loaded" class="well">';a=nsFilter.fActiveFilter(a);b="undefined"!=typeof a&&null!=a?b+nsFilter.nsHtml.fLoadFilterFromObject(a):b+nsFilter.nsHtml.fWrapSubFilterButtonGroup(nsFilter.nsHtml.fSubFilterButtonGroup(nsFilter.nsStandard.oGroup));return b+"</div>"};nsFilter.nsHtml.fLoadNew=function(){var a=nsFilter.nsHtml.fGetFilterUI();$("#filter_editor .modal-body").html(a)};
nsFilter.nsHtml.fUpdateUI=function(){var a="Select filter",b=!0;nsFilter.sOriginalJSON!=nsFilter.sEditedJSON?(a="Edit name",$("#sel_filter .btn").not(".close").addClass("disabled"),$("#sel_filter .validate.btn").addClass("btn-warning").removeClass("btn-default btn-primary"),0<$("#sel_filter input").val().length&&$("#save_filter").removeClass("btn-default btn-success disabled"),$("#discard_filter").removeClass("disabled"),$("#delete_filter").addClass("disabled")):($("#sel_filter .btn").removeClass("btn-default btn-warning disabled"),
$("#sel_filter .validate.btn").addClass("btn-primary").removeClass("btn-default btn-warning"),$("#save_filter").addClass("disabled"),$("#discard_filter").addClass("disabled"),$("#delete_filter").removeClass("disabled"),b=!1);$("#sel_filter_label").html(a);return b};
nsFilter.nsHtml.fLoadFilterFromObject=function(a,b){var c;"undefined"==typeof b&&(b=!1);c=""+nsFilter.nsHtml.fWrapSubFilterButtonGroup(nsFilter.nsHtml.fSubFilterButtonGroup(a.oValues,b));if("undefined"!=typeof a.sub){for(var d="",e=0;e<a.sub.length;e++)d+=nsFilter.nsHtml.fLoadFilterFromObject(a.sub[e],!0);d=nsFilter.nsHtml.fWrapSubFilterGroup(d);c+=d}return c};
nsFilter.nsHtml.fAddSubRow=function(a,b){"undefined"==typeof b&&(b="class_made_hand");a.children().first();var c=nsFilter.nsHtml.fSubFilterButtonGroup(b,!0),c=nsFilter.nsHtml.fWrapSubFilterButtonGroup(c,0);a.next().is(".filter_group_subgroup")?a.next().append(c):(c=nsFilter.nsHtml.fWrapSubFilterGroup(c),a.after(c))};nsFilter.nsHtml.fTypeStringToClass=function(a,b){return a+b.replace(/\s+/g,"_").toLowerCase()};
nsFilter.nsHtml.fSubFilterButtonGroup=function(a,b){sSelected="string"==nsUtil.fType(a)?a:"undefined"==typeof a||"undefined"==typeof a.sub_filter_type?"class_group":a.sub_filter_type;"undefined"==typeof a&&(a={});sHtml="";var c=nsFilter.nsHtml.fTypeStringToClass("filter_btns_",sSelected);sHtml+='<div class="btn-group '+c+'  filter_ctrl_btn_group">';"undefined"==typeof b&&(b=!1);switch(sSelected){case "class_group":sHtml+=nsFilter.nsHtml.fGroupTypeFilterButtonGroup(a);break;case "class_made_hand":sHtml+=
nsFilter.nsHtml.fMadeHandTypeFilterButtonGroup(a);break;case "class_drawing_hand":sHtml+=nsFilter.nsHtml.fDrawingHandTypeFilterButtonGroup(a);break;case "class_filter":sHtml+=nsFilter.nsHtml.fFilterTypeFilterButtonGroup(a)}b&&(sHtml+=nsFilter.nsHtml.fRemoveFilterButton());return sHtml+="</div>"};nsFilter.nsHtml.fGroupTypeFilterButtonGroup=function(a){var b;b=""+nsFilter.nsHtml.fSubFilterTypeButtons("class_group");b+=nsFilter.nsHtml.fLogicalOpButtons(a.group_log_op);return b+=nsFilter.nsHtml.fNewSubFilterButton()};
nsFilter.nsHtml.fMadeHandTypeFilterButtonGroup=function(a){var b;b=""+nsFilter.nsHtml.fSubFilterTypeButtons("class_made_hand");b+=nsFilter.nsHtml.fAtLeastFilterTypeButtons(a.comparator_op);return b+=nsFilter.nsHtml.fMadeHandFilterTypeButtons(a.made_hand_op)};nsFilter.nsHtml.fDrawingHandTypeFilterButtonGroup=function(a){var b;b=""+nsFilter.nsHtml.fSubFilterTypeButtons("class_drawing_hand");b+=nsFilter.nsHtml.fAtLeastFilterTypeButtons(a.comparator_op);return b+=nsFilter.nsHtml.fDrawingHandFilterTypeButtons(a.drawing_hand_op)};
nsFilter.nsHtml.fFilterTypeFilterButtonGroup=function(a){var b;b=""+nsFilter.nsHtml.fSubFilterTypeButtons("class_filter");return b+=nsFilter.nsHtml.fSubFilterSelectionButtons(a.sub_filter_op)};
nsFilter.nsHtml.fSubFilterTypeButtons=function(a){"undefined"==typeof a&&(a="class_group");var b=["class_group","class_filter","class_made_hand","class_drawing_hand"],c=["Group","Filter","Made Hand","Drawing Hand"],d=0;if("undefined"!=typeof a)for(var e=0;e<b.length;e++)if(a==b[e]){d=e;break}var f;f=""+('<button type="button" class="btn btn-primary '+a.toLowerCase()+'">');f+=c[d];f+='</button><div class="btn-group">';f+='<button type="button" class="btn dropdown-toggle btn-primary" data-toggle="dropdown">';
f+='<span class="caret"></span>';f+="</button>";f+='<ul selection-type="sub_filter_type" class="dropdown-menu sub_filter_type">';for(e=0;e<b.length;e++)d="",a==b[e]&&(d="selected active"),f+='<li class="'+d+'"><a href="#" class="'+b[e]+'">'+c[e]+"</a></li>";f+="</ul>";return f+="</div>"};
nsFilter.nsHtml.fLogicalOpButtons=function(a){var b=["log_op_or","log_op_and"],c=["OR","AND"],d=0;if("undefined"!=typeof a)for(var e=0;e<b.length;e++)if(a==b[e]){d=e;break}a='<button type="button" class="btn btn-default log_op_or">'+c[d];a+="</button>";a+='<div class="btn-group">';a+='<button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown">';a+='<span class="caret"></span>';a+="</button>";a+='<ul selection-type="group_log_op"  class="group_log_op dropdown-menu">';for(e=
0;e<b.length;e++){var f="";e==d&&(f="selected active");a+='<li class="'+f+'"><a href="#" class="'+b[e]+'"  >'+c[e]+"</a></li>"}a+="</ul>";return a+="</div>"};
nsFilter.nsHtml.fAtLeastFilterTypeButtons=function(a){var b=["at_least","at_most"],c=["At Least","At Most"],d=0;if("undefined"!=typeof a)for(var e=0;e<b.length;e++)if(a==b[e]){d=e;break}a='<button type="button" class="btn btn-default at_least">'+c[d];a+="</button>";a+='<div class="btn-group">';a+='<button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown">';a+='<span class="caret"></span>';a+="</button>";a+='<ul selection-type="comparator_op" class="comparator_op dropdown-menu">';
for(e=0;e<b.length;e++){var f="";e==d&&(f="selected active");a+='<li class="'+f+'"><a href="#" class="'+b[e]+'"  >'+c[e]+"</a></li>"}a+="</ul>";return a+="</div>"};
nsFilter.nsHtml.fMadeHandFilterTypeButtons=function(a){for(var b=[],c=[],d=0;9>d;d++){var e={};e.rank=d;e=nsHand.fHandToString(e);b.push(e);c.push("made_hand_"+d)}d=0;if("undefined"!=typeof a)for(e=0;e<c.length;e++)if(a==c[e]){d=e;break}a='<button type="button" class="btn btn-default">'+b[d];a+="</button>";a+='<div class="btn-group">';a+='<button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown">';a+='<span class="caret"></span>';a+="</button>";a+='<ul selection-type="made_hand_op" class="made_hand_op dropdown-menu">';
for(e=0;e<b.length;e++){var f="";e==d&&(f="selected active");a+='<li class="'+f+'"><a href="#" class="'+c[e]+'" >'+b[e]+"</a></li>"}a+="</ul>";return a+="</div>"};nsFilter.nsHtml.fGetCurrentFilterNameIntern=function(){return $("#sel_filter input").val().split(" ").join("_").toLowerCase()};
nsFilter.nsHtml.fSubFilterSelectionButtons=function(a){var b=[],c=[],d=[];$("#filter_config_menu .filter").each(function(){var a=$(this).attr("id"),e=$("#sel_filter").val(),f=$(this).find("a").clone();f.find("span").remove();f=f.html();e!=a&&(b.push(a),c.push(f),d.push(nsFilter.nsHtml.fTypeStringToClass("",f)))});var e=0;if("undefined"!=typeof a)for(var f=0;f<d.length;f++)if(a==d[f]){e=f;break}a=nsFilter.nsHtml.fGetCurrentFilterNameIntern();var g;g='<button type="button" class="btn btn-default">'+
c[e];g+="</button>";g+='<div class="btn-group">';g+='<button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown">';g+='<span class="caret"></span>';g+="</button>";g+='<ul selection-type="sub_filter_op" class="dropdown-menu">';for(f=0;f<b.length;f++)if(a!=d[f]){var h="";f==e&&(h="selected active");g+='<li class="'+h+'"><a href="#" class="'+d[f]+'">'+c[f]+"</a></li>"}g+="</ul>";return g+="</div>"};
nsFilter.nsHtml.fDrawingHandFilterTypeButtons=function(a){for(var b=[],c=[],d=0;5>d;d++){var e={};e.rank=d;e=nsDrawingHand.fDrawingHandToShortString(e);b.push(e);c.push("drawing_hand_"+d)}d=0;if("undefined"!=typeof a)for(e=0;e<c.length;e++)if(a==c[e]){d=e;break}a='<button type="button" class="btn btn-default">'+b[d];a+="</button>";a+='<div class="btn-group">';a+='<button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown">';a+='<span class="caret"></span>';a+="</button>";
a+='<ul selection-type="drawing_hand_op" class="drawing_hand_op dropdown-menu">';for(e=0;e<b.length;e++){var f="";e==d&&(f="selected active");a+='<li class="'+f+'"><a href="#" class="'+c[e]+'"  >'+b[e]+"</a></li>"}a+="</ul>";return a+="</div>"};nsFilter.nsHtml.fNewSubFilterButton=function(){var a;a='<button title="New Subfilter" class="new_subfilter btn-success btn" type="button"><span class="glyphicon glyphicon-plus-sign"></span>';return a+="</button>"};
nsFilter.nsHtml.fRemoveFilterButton=function(){var a;a='<button title="Delete subfilter" class="delete_subfilter btn-warning btn" type="button"><span class="glyphicon glyphicon-minus-sign"></span>';return a+="</button>"};var nsHand={},oHand={},oHand={rank:0,high:-1,low:-1,kickers:[],subtype:-1,drawinghands:[],HIGH_CARD:0,PAIR:1,TWO_PAIR:2,THREE_OF_A_KIND:3,STRAIGHT:4,FLUSH:5,FULL_HOUSE:6,FOUR_OF_A_KIND:7,STRAIGHT_FLUSH:8,TOP_Pair:0};
nsHand.fHandToString=function(a){var b="";switch(a.rank){case oHand.HIGH_CARD:b="High Card";break;case oHand.PAIR:b="Pair";break;case oHand.TWO_PAIR:b="Two Pair";break;case oHand.THREE_OF_A_KIND:b="Three Of A Kind";break;case oHand.STRAIGHT:b="Straight";break;case oHand.FLUSH:b="Flush";break;case oHand.FULL_HOUSE:b="Full House";break;case oHand.FOUR_OF_A_KIND:b="Four Of A Kind";break;case oHand.STRAIGHT_FLUSH:b="Straight Flush";break;default:b="ERROR UNKNOWN!!!"}return b};
nsHand.fGetBestHand=function(a){var b=nsHand;if(1===a.length)return{rank:oHand.HIGH_CARD,high:a[0].rank,low:-1,kickers:[]};a.sort(nsHand.fCompareCard);var c=b.fFindBestStraight(a);if(null!=c&&c.rank==oHand.STRAIGHT_FLUSH)return c;var d=b.fFindBestSet(a);if(d.rank>=oHand.FULL_HOUSE)return d;a=b.fFindBestFlush(a);return null!=a?a:null!=c?c:d};nsHand.fBigIntFirst=function(a,b){return b-a};
nsHand.fCompareHand=function(a,b){if(a.rank!==b.rank)return b.rank-a.rank;if(a.high!==b.high)return b.high-a.high;if(a.low!==b.low)return b.low-a.low;if("undefined"==typeof a.kickers||0==a.kickers.length)return 0;a.kickers.sort(nsHand.fBigIntFirst);b.kickers.sort(nsHand.fBigIntFirst);for(var c=0;c<a.kickers.length;c++)if(b.kickers[c]!==a.kickers[c])return b.kickers[c]-a.kickers[c];return 0};
nsHand.fFindBestFlush=function(a){for(var b=[],c=1;4>=c;c++)for(var d=[],e=0;e<a.length;e++)if(a[e].suit==c&&d.push(a[e]),5==d.length){b=fPushArrayMultiDim(b,d);break}if(0<b.length){b.sort(nsHand.fCompareFlushes);a={};a.rank=oHand.FLUSH;a.high=b[0][4].rank;a.low=a.high;a.kickers=[];for(e=0;5>e;e++)a.kickers.push(b[0][e].rank);return a}return null};nsHand.fCompareFlushes=function(a,b){for(i=0;5>i;i++)if(a[i].rank!=b[i].rank)return b[i].rank-a[i].rank};
var fPushArrayMultiDim=function(a,b){a[a.length]=b;return a};
nsHand.fFindBestStraight=function(a){var b=[];for(iLowRank=10;1<=iLowRank;iLowRank--){var c=[];for(memberInStraight=0;5>memberInStraight;memberInStraight++){var d=iLowRank+memberInStraight;1==iLowRank&&0==memberInStraight&&(d=14);var e=nsHand.fFindAllCardsWithRank(a,d);if(0==c.length&&0<e.length)c[memberInStraight]=e;else if(0<c.length&&0<e.length&&(c[c.length-1][0].rank==d-1||14==c[c.length-1][0].rank&&2==d))c[memberInStraight]=e;else break}5==c.length&&(b=fPushArrayMultiDim(b,c))}a=[];for(c=0;c<
b.length;c++)d=nsHand.fStraightFromAmbig(b[c]),a=fPushArrayMultiDim(a,d);a.sort(nsHand.fCompareHand);return 0<a.length?a[0]:null};
nsHand.fStraightFromAmbig=function(a){if(0!=a.length){for(var b=[],c=a[0],d=0;d<c.length;d++){for(var e=c[d].suit,f=!1,g=0;g<b.length;g++)e==b[g]&&(f=!0);f||b.push(e)}for(c=1;c<a.length;c++){for(var f=a[c],e=[],d=0;d<b.length;d++){for(var h=b[d],k=!1,g=0;g<f.length;g++)f[g].suit==h&&(k=!0);k||e.push(b[d])}for(g=0;g<e.length;g++)for(d=0;d<b.length;d++)e[g]==b[d]&&b.splice(d,1)}g={};g.rank=0<b.length?oHand.STRAIGHT_FLUSH:oHand.STRAIGHT;g.low=a[0][0].rank;14==g.low&&(g.low=1);g.high=g.low+5;return g}};
nsHand.fFindAllCardsWithRank=function(a,b){var c=[];for(i=0;i<a.length;i++)a[i].rank==b&&c.push(a[i]);return c};
nsHand.fFindBestSet=function(a){for(var b=[],c=14;2<=c;c--){var d=0,e=[],f=[];for(j=0;j<a.length;j++)a[j].rank==c?(d++,e.push(c)):f.push(a[j].rank);2<=d&&b.push({same:e,kickers:f})}b.sort(nsHand.fCompareSimpleSet);if(0<b.length){for(var c=0;c<b.length;c++)b[c].kickers.sort(nsHand.fBigIntFirst);e=b[0];if(4==e.same.length)return d={},d.rank=oHand.FOUR_OF_A_KIND,d.low=e.same[0],d.high=d.low,d.kickers=e.kickers.slice(0,1),d;if(3==e.same.length)return 1<b.length?(d={},d.rank=oHand.FULL_HOUSE,d.high=e.same[0],
d.low=b[1].same[0],d.kickers=[]):(d={},d.rank=oHand.THREE_OF_A_KIND,d.high=e.same[0],d.low=d.high,d.kickers=e.kickers.slice(0,2)),d;if(2==e.same.length){if(1<b.length)for(d={},d.rank=oHand.TWO_PAIR,d.high=e.same[0],d.low=b[1].same[0],c=0;c<e.kickers.length;c++){if(e.kickers[c]!=b[1].same[0]){d.kickers=[e.kickers[c]];break}}else d={},d.rank=oHand.PAIR,d.high=e.same[0],d.low=d.high,d.high==a[0].rank&&(d.subtype=oHand.TOP_Pair),d.kickers=e.kickers.slice(0,3);return d}}a.sort(nsHand.fCompareCard);b=[];
for(c=0;c<a.length;c++)b.push(a[c].rank);d={};d.rank=oHand.HIGH_CARD;d.high=-1;d.low=-1;d.kickers=b;return d};nsHand.fCompareCard=function(a,b){return b.rank-a.rank};nsHand.fCompareSimpleSet=function(a,b){return a.same.length!=b.same.length?b.same.length-a.same.length:b.same[0]-a.same[0]};nsHand.fFindHighCards=function(a){var b=[],c=a.length;for(i=0;i<c;i++)b[i]=-1;for(i=0;i<c;i++){var d=-1,e=a.length;for(j=0;i<e;j++)d=a[j],d.rank>=b&&(b[i]=d.rank),d=j;a.splice(d,1)}return b};var nsHtml={fGetBoardSelectionTable:function(){var a="<div id='board_selection_table'>",b=fGetAllCards();aKnownCards=nsUI.fGetKnownCards();for(var c=0;52>c;c++){0==c%13&&(0<c&&(a+="</div>"),a+="<div style='white-space: nowrap;'>");for(var d=!1,e=0;e<aKnownCards.length;e++)aKnownCards[e].suit===b[c].suit&&aKnownCards[e].rank===b[c].rank&&(d=!0);a+=nsHtml.fWrapCard(b[c],d,d)}return a+"<div><span class='glyphicon glyphicon-remove'></span></div>"},fRedrawBoardSelectionTable:function(){$("#board_selection_table").parent().html(nsHtml.fGetBoardSelectionTable)}},
fGetAllCards=function(){for(var a=[],b=51;0<=b;b--)a[b]={},a[b].rank=14-b%13,a[b].suit=5-Math.floor((b+13)/13);return a};nsHtml.fWrapCard=function(a,b,c){b=b?" disabled ":"";c=c?" selected ":"";var d=a;"string"==nsUtil.fType(a)&&(d=fConvertCardStringToCardObject(a));a=nsConvert.rankNumberToChard(d.rank)+nsConvert.suitToDisplayChar(d.suit);return'<span class="card suit_'+nsConvert.suitToChar(d.suit)+" rank_"+d.rank+c+b+'">'+a+"</span>     "};
nsHtml.fAbbreviateDrawingHandStrings=function(a){a=a.split("-");for(i=0;i<a.length;i++)a[i]=a[i].trim();var b="";for(i=0;i<a.length;i++)b=b+"&nbsp;"+nsHtml.fAbbreviateHandType(a[i]);return b};
nsHtml.fAbbreviateInnerString=function(a){var b="";switch(a){case "High Card":b="HC";break;case "Pair":b="Pa";break;case "Two Pair":b="2P";break;case "Three Of A Kind":b="3K";break;case "Straight":b="St";break;case "Flush":b="Fl";break;case "Full House":b="FH";break;case "Four Of A Kind":b="4K";break;case "Straight Flush":b="SF";break;case "Top Pair":b="TP";break;case "Backdoor Straight Draw":b="SD(Bd)";break;case "Backdoor Flush Draw":b="FD(Bd)";break;case "Gutshot Straight Draw":b="SD(Gs)";break;
case "Open Ended Straight Draw":b="SD(OE)";break;case "Flush Draw":b="FD";break;default:b="UNKNOWN !!!!"}return b};nsHtml.fAbbreviateHandType=function(a){var b=nsHtml.fAbbreviateInnerString(a);return"<abbr data-toggle='tooltip' title='"+a+"'>"+b+"</abbr>"};
nsHtml.fDrawMultProgressBar=function(a,b,c,d,e,f){a||(a="");b||(b="");var g="";f&&(f=Math.max(1.5,f),g="style='width:"+f+"%;'");a='<div id="'+a+'" class="progress '+b+'"'+g+'><div class="progress-bar progress-bar-success" style="width:'+c+'%"></div>';a=a+'<div class="progress-bar" style="width:'+d+'%"></div>';a=a+'<div class="progress-bar progress-bar-danger" style="width: '+e+'%"></div>';return a+="</div>"};
nsHtml.fUpdateMultProgressBar=function(a,b,c,d){$(a).children().each(function(a){0==a&&$(this).css("width",b+"%");1==a&&$(this).css("width",c+"%");2==a&&$(this).css("width",d+"%")})};
nsHtml.fSetupTextureHover=function(a){var b=a.oVillainStat;$("#textures .row").mouseenter(function(){$("#op_range").addClass("board_highlight");var a=nsHtml.oTextureResultDic[$(this).attr("id")],a=b[a].oPairRecord,d;for(d in a)$("#op_range_"+d).addClass("highlight")});$("#textures .row").mouseleave(function(){$("#op_range").removeClass("board_highlight");$("#op_range_table td").removeClass("highlight")})};nsHtml.oTextureResultDic={};
nsHtml.fGetTextureHtml=function(a){var b=a.oVillainStat;a=a.count;var c="",d=[];for(g in b)d.push(g);d.sort(function(a,c){return b[c].count-b[a].count});for(var e=0,f=0;f<d.length;f++){var g=d[f],h=100*(b[g].count/a);0==f&&(e=h);var k="texture_result_"+f;nsHtml.oTextureResultDic[k]=g;var n=h.toFixed(1)+"%",h=nsHtml.fDrawMultProgressBar("texture_result_"+f,"sub_result_pb",0,100,0,100*(h/e)),g=nsHtml.fAbbreviateHandType(g),c=c+'<div class=row id="'+k+'"><div class="col-lg-6">  <p class="text-info"><span class="glyphicon glyphicon-star-empty"></span>'+
g+' <span class="stat_percent">('+n+')</span> </p></div><div class="col-lg-6">'+h+" </div></div>"}return c};nsHtml.PIE_THRESHOLD=1.5;nsHtml.fGetPieCharLegendColor=function(){return $("#palette .btn-default").css("color")};
nsHtml.fGetPieChartColors=function(a){for(var b=0,c=[],d=0;b<a;)$("#palette .btn").not(".btn-default").not(".btn-link").not(".btn-primary").each(function(){var a=$(this).css("background-color"),f=0==b%2;0==d?a=f?a:Chromath.lighten(a,0.3).toHexString():1==d?a=f?Chromath.lighten(a,0.4).toHexString():Chromath.darken(a,0.4).toHexString():2==d?a=f?Chromath.darken(a,0.6).toHexString():Chromath.lighten(a,0.6).toHexString():3==d?a=Chromath.lighten(a,0.2).toHexString():4==d?a=Chromath.lighten(a,0.3).toHexString():
5==d&&(a=Chromath.lighten(a,0.4).toHexString());6==b%7&&(a=Chromath.desaturate(a,1).toHexString());c.push(a);b++}),d++;return c};
nsHtml.fDrawTexturPie=function(a){var b=$("#inner-stats .tab-pane.active");$("#inner-stats .tab-pane").removeClass("active");$("#textures").addClass("active");var c=a.oVillainStat,d=a.count,e=[];for(k in c)e.push(k);e.sort(function(a,b){return c[b].count-c[a].count});$("#textures svg").remove();a=[];for(var f=[],g=[],h=0;h<e.length;h++){var k=e[h],n=c[k].count;a.push(n);var l=nsHtml.fAbbreviateInnerString(k)+"\u00a0\u00a0\u00a0\u00a0";f.push(l);nsHtml.oTextureResultDic["texture_result_"+h]=k;k=(100*
(n/d)).toFixed(1)+"%";g.push(k)}$("#textures").prepend('<strong id="pie_hover_title" style="position:absolute;left:5px;top:5px"></strong>');d=Raphael("textures",320,260);h=nsHtml.fGetPieChartColors(a.length);d.piechart(200,140,110,a,{legend:f,legendpos:"west",minPercent:nsHtml.PIE_THRESHOLD,colors:h,legendcolor:nsHtml.fGetPieCharLegendColor()}).hover(function(){$("#op_range").addClass("board_highlight");this.sector.stop();this.sector.scale(1.1,1.1,this.cx,this.cy);var a=$(this.sector[0]).index("#textures svg path");
-1==a&&(a=0);$("#pie_hover_title").html(e[a]+" "+g[a]);var a=c[nsHtml.oTextureResultDic["texture_result_"+a]].oPairRecord,b;for(b in a)$("#op_range_"+b).addClass("highlight");this.label&&(this.label[0].stop(),this.label[0].attr({r:7.5}),this.label[1].attr({"font-weight":800}))},function(){$("#op_range").removeClass("board_highlight");$("#pie_hover_title").html("");this.sector.animate({transform:"s1 1 "+this.cx+" "+this.cy},500,"bounce");$("#op_range_table td").removeClass("highlight");this.label&&
(this.label[0].animate({r:5},500,"bounce"),this.label[1].attr({"font-weight":400}))});$("#inner-stats .tab-pane").removeClass("active");b.addClass("active")};
nsHtml.fGetResultStatHtml=function(a,b){var c=[];for(e in a)c.push(e);c.sort(function(b,c){return a[c].wonCount+a[c].lossCount+a[c].drawCount-(a[b].wonCount+a[b].lossCount+a[b].drawCount)});var d="";for(i=0;i<c.length;i++){var e=c[i],f=c[0],g=100*((a[f].wonCount+a[f].lossCount+a[f].drawCount)/b.total),h=a[e].wonCount,k=a[e].lossCount,n=a[e].drawCount,l=h+k+n,f=100*(h/l),p=100*(k/l),q=100*(n/l),m=100*(l/b.total);(100*(h/l)).toFixed(1);(100*(k/l)).toFixed(1);(100*(n/l)).toFixed(1);h=(100*(l/b.total)).toFixed(1)+
"%";g=100*(m/g);e=nsHtml.fAbbreviateHandType(e);f=nsHtml.fDrawMultProgressBar("hero_result_"+i,"sub_result_pb",f,q,p,g);d=d+'<div class=row><div class="col-lg-4">  <p class="text-info"><span class="glyphicon glyphicon-star-empty"></span>'+e+' <span class="stat_percent">('+h+')</span> </p></div><div class="col-lg-8">'+f+" </div></div>"}return d};
nsHtml.fDrawResultsStatPie=function(a,b,c){var d=$("#inner-stats  .tab-pane.active");$("#inner-stats .tab-pane").removeClass("active");$("#"+c).addClass("active");var e=[];for(r in a)e.push(r);e.sort(function(b,c){return a[c].wonCount+a[c].lossCount+a[c].drawCount-(a[b].wonCount+a[b].lossCount+a[b].drawCount)});$("#"+c+" svg").remove();for(var f=[],g=[],h=[],k=[],n=[],l=[],p=[],q="",m=0;m<e.length;m++){var r=e[m],t=a[r].wonCount,u=a[r].lossCount,w=a[r].drawCount,s=t+u+w,x=100*(s/b.total),t=(100*(t/
s)).toFixed(1)+"%",u=(100*(u/s)).toFixed(1)+"%",w=(100*(w/s)).toFixed(1)+"%",y=(100*(s/b.total)).toFixed(1)+"%";f.push(s);r=nsHtml.fAbbreviateInnerString(r)+"\u00a0\u00a0\u00a0\u00a0";g.push(r);k.push(y);n.push(t);l.push(w);p.push(u);h.push(x<nsHtml.PIE_THRESHOLD?"%OTHERS%":e[m]+" "+k[m]+" Win: "+n[m]+" Draw: "+l[m]+" Loss: "+p[m])}for(m=0;m<h.length;m++)"%OTHERS%"==h[m]&&(q=q+" "+e[m]+" WIN: "+t+" ");for(m=0;m<h.length;m++)"%OTHERS%"==h[m]&&(h[m]=q);$("#"+c).prepend('<strong id="pie_hover_title_'+
c+'" style="position:absolute;top:5px;left:5px;"></strong>');b=Raphael(c,320,260);e=nsHtml.fGetPieChartColors(f.length);b.piechart(200,140,110,f,{legend:g,legendpos:"west",minPercent:nsHtml.PIE_THRESHOLD,colors:e,legendcolor:nsHtml.fGetPieCharLegendColor()}).hover(function(){this.sector.stop();this.sector.scale(1.1,1.1,this.cx,this.cy);var a=$(this.sector[0]).index("#"+c+" svg path");-1==a&&(a=0);a=h[a];$("#pie_hover_title_"+c).html(a);this.label&&(this.label[0].stop(),this.label[0].attr({r:7.5}),
this.label[1].attr({"font-weight":800}))},function(){$("#pie_hover_title_"+c).html("");this.sector.animate({transform:"s1 1 "+this.cx+" "+this.cy},500,"bounce");this.label&&(this.label[0].animate({r:5},500,"bounce"),this.label[1].attr({"font-weight":400}))});$("#inner-stats .tab-pane").removeClass("active");d.addClass("active")};
var fGetPairFromPairString=function(a,b){var c=nsConvert.fGetCardArrayFromPair(fGetCardPairFromString(a)),d=nsUI.fGetKnownCards();returnString="<div id='expanded_pair_"+a+"' class='expanded_pair'>";for(i=0;i<c.length;i++){for(var e=!1,f=0;f<d.length;f++)d[f].suit===c[i][0].suit&&d[f].rank===c[i][0].rank?e=!0:d[f].suit===c[i][1].suit&&d[f].rank===c[i][1].rank&&(e=!0);returnString=returnString+fWrapPair(nsHtml.fWrapCard(c[i][0])+nsHtml.fWrapCard(c[i][1]),e,b)+"    "}return returnString+="</div>"};
nsHtml.fRestoreStatHtml=function(){};nsHtml.fSetMainStatBar=function(a,b,c){$("#win_percent_bar div").each(function(d){0==d&&$(this).css("width",a+"%");1==d&&$(this).css("width",b+"%");2==d&&$(this).css("width",c+"%")})};
nsHtml.fInitResultPopovers=function(){$("#inner-stats .sub_result_pb").popover({content:function(){var a="",b=parseFloat($(this).css("width"))/100;$(this).children().each(function(c){0==c&&(a=a+"win: "+(parseFloat($(this).css("width"))/b).toFixed(1)+"%");1==c&&(a=a+" draw: "+(parseFloat($(this).css("width"))/b).toFixed(1)+"%");2==c&&(a=a+" loss: "+(parseFloat($(this).css("width"))/b).toFixed(1)+"%")});return a},placement:"bottom",trigger:"hover",html:!0})};var nsMaths={};function fCombinatorics(a,b){if(0==b)return[];var c=[];for(i=0;i<b;i++)c[i]=0;var d=[],e=a.length-c.length,f=function(){var b=[],e=c.length;for(i=0;i<e;i++)b[i]=a[i+c[i]];d.push(b)};for(f();c[0]!=e;){for(i=c.length-1;0<=i;i--)if(c[i]<e){var g=c[i]+1;c[i]=g;for(j=i+1;j<c.length;j++)c[j]=Math.min(g,c[j]);break}f()}return d}var fNumberOfCombinations=function(a,b){return factorial(a)/(factorial(b)*factorial(a-b))},factorial=function(a){return 1>=a?1:a*factorial(a-1)};
nsMaths.fShuffle=function(a,b){var c=[],d=a.length;if(0===d)return a;"undefined"==typeof b&&(b=d);for(i=d;0<i;i--){d=Math.floor(Math.random()*(i-1));c.push(a[d]);if(c.length>=b)break;a.splice(d,1)}return c};"strict mode";
var MenuItemGroup=function(a,b){_.isUndefined(b);_.isUndefined(a)},MenuItem=AWModel.extend({className:"MenuItem",defaults:{selectable:!0,selected:!1,action:null,value:1,dispayValue:this.value,divider:!1,group:null},initialize:function(a){}}),MenuList=AWCollection.extend({className:"MenuCollection",model:MenuItem}),MenuListModel=AWCollectionModel.extend({className:"MenuListModel",collection:MenuList}),standardGroup=new MenuItemGroup,rangeMenuActionGroup=new MenuItemGroup("clearboard",!1),MenuView=
AWView.extend({initialize:function(){this.compiledTemplate=Mustache.compile(this.template);var a=$(Mustache.render("#{{.}}",this.idPrefix()+this.id()));_.isElement(a[0])&&(this.el=a[0],this.$el=a);var b=this;b.views=[];this.model._collection.forEach(function(a){b.views.push(new MenuItemView({model:a,parentView:b}))})},id:function(){return this.model.cid},idPrefix:function(){return""},views:[],className:function(){return"ctrls dropdown-menu"},tagName:"ul",after:"rand_ctrl",render:function(){var a=
{id:this.id(),className:this.className(),html:[],tagName:this.tagName};_.forEach(this.views,function(b){a.html.push(b.render())});var b=this.compiledTemplate(a);$("#"+this.after).after(b)},template:"<{{tagName}} id='{{id}}' class='{{className}}'>\t\t\t\t\t{{#html}}\t\t\t\t\t\t{{{.}}}\t\t\t\t\t{{/html}}\t\t\t\t</{{tagName}}>"}),MenuItemView=AWView.extend({initialize:function(a){this.compiledTemplate=Mustache.compile(this.template);this.parentView=a.parentView;a=$(Mustache.render("#{{.}}",this.idPrefix()+
this.id()));_.isElement(a[0])&&(this.el=a[0],this.$el=a)},tagName:"li",className:function(){var a="";this.model.get("active")&&(a+="active");return a},events:{click:"handleclick"},handleclick:function(){this.model.get("selectable")&&this.model.toggle("selected");this.model.get("action")&&this.model.action()},render:function(){var a=this.renderData();return this.model.get("divider")?"<li class='divider'></li>":this.compiledTemplate(a)},idPrefix:function(){return this.parentView.id()+"_"},id:function(){return this.model.get("value")},
icon:function(){var a=null;this.model.get("active")?a="glyphicon-ok":null!=this.model.get("action")&&(a="glyphicon-cog");return a?Mustache.render(this.iconTemplate,{iconClass:a}):""},iconTemplate:'<span class="glyphicon {iconClass}"></span>',renderData:function(){return{"class":this.className(),id:this.id(),id_prefix:this.idPrefix(),displayValue:this.model.get("displayValue"),icon:this.icon()}},template:"<li id='{{id}}' class='{{className}}'>\t\t\t\t\t<a>{{{displayValue}}}</a>\t\t\t\t</li>"}),loggingMenu=
new MenuListModel([{value:"A",displayValue:"FlopYoMama.js",group:standardGroup},{value:"B",displayValue:"RangeTable.js",group:standardGroup},{value:"C",displayValue:"Slider.js",group:standardGroup},{value:"D",displayValue:"Range.js",group:standardGroup}]),loggingModelView=new MenuView({model:loggingMenu}),randomMenu=new MenuListModel([{value:"hand",displayValue:"Hand",group:standardGroup},{divider:!0},{value:"flop",displayValue:"Flop",group:standardGroup},{value:"turn",displayValue:"Turn",group:standardGroup},
{value:"river",displayValue:"River",group:standardGroup},{divider:!0},{value:"clear_board",displayValue:"Clear Board",group:rangeMenuActionGroup,action:"clearBoard",selectable:!1}]);loggingModelView.after="palette";var randomModelView=new MenuView({model:randomMenu});$(function(){randomModelView.render();loggingModelView.render()});var Pair=AWModel.extend({className:"Pair",_stringToPrm:function(a){this.sCardPair=a=a[0];var b={};b.rank1=nsConvert.rankCharToNumber(a[0]);b.rank2=nsConvert.rankCharToNumber(a[1]);b.suited=3==a.length&&"s"==a[2];return b},initialize:function(a){a.comb=a.rank1==a.rank2?6:a.suited?4:12;this.set("comb",a.comb)},endingChar:function(){return this.get("suited")?"s":12==this.get("comb")?"o":""},toString:function(){var a=this.get("rank1"),b=this.get("rank2"),c=a<b?a:b;return nsConvert.rankNumberToChar(a>
b?a:b)+""+nsConvert.rankNumberToChar(c)+this.endingChar()},bPPair:function(){return this.get("rank1")==this.get("rank2")},toArray:function(a){var b=[],c=[],d=this.get("rank1"),e=this.get("rank2"),f=this.get("suited");d==e?(b.push({rank:e,suit:1}),b.push({rank:e,suit:2}),b.push({rank:e,suit:3}),b.push({rank:e,suit:4})):(b.push({rank:e,suit:1}),b.push({rank:e,suit:2}),b.push({rank:e,suit:3}),b.push({rank:e,suit:4}),b.push({rank:d,suit:1}),b.push({rank:d,suit:2}),b.push({rank:d,suit:3}),b.push({rank:d,
suit:4}));c=fCombinatorics(b,2);for(b=0;b<c.length;b++)c[b].sort(function(a,b){return a.rank!=b.rank?b.rank-a.rank:b.suit-a.suit});c.sort(function(a,b){if(a[0].rank!=b[0].rank)return b[0].rank-a[0].rank;if(a[0].suit!=b[0].suit)return b[0].suit-a[0].suit});aKnownFiltered=[];if("object"==typeof a)for(aKnown=a,b=0;b<c.length;b++){a=!0;for(j=0;j<aKnown.length;j++)if(c[b][0].rank==aKnown[j].rank&&c[b][0].suit==aKnown[j].suit||c[b][1].rank==aKnown[j].rank&&c[b][1].suit==aKnown[j].suit)a=!1;!0===a&&aKnownFiltered.push(c[b])}else aKnownFiltered=
c;if(d==e)return new CardListList(aKnownFiltered);d=[];c=[];for(b=0;b<aKnownFiltered.length;b++)aKnownFiltered[b][0].rank!=aKnownFiltered[b][1].rank&&(aKnownFiltered[b][0].suit==aKnownFiltered[b][1].suit?d.push(aKnownFiltered[b]):c.push(aKnownFiltered[b]));b=d;f||(b=c);return cardList=new CardListList(b)}}),PairList=AWCollection.extend({className:"PairList",model:Pair}),PairListModel=AWCollectionModel.extend({className:"PairListModel",collection:PairList}),PairView=Backbone.View.extend({initialize:function(){},
tagName:"td",className:function(){if(_.isUndefined(this.model))return"";var a="offsuit";this.model.bPPair()?a="pPair":this.model.get("suited")&&(a="suit");return a},render:function(){var a=this.renderData(),a=Mustache.render(this.template,a);this.$el.html(a);return a},renderData:function(){return{"class":this.className(),id:this.model.toString(),id_prefix:"op_range_",string:this.model.toString()}},template:"<td class='{{class}}' id='{{id_prefix}}{{id}}'>\t\t\t\t\t<div class='pair_wrapper'>\t\t\t\t\t<div class='static_bg'>&nbsp;</div>\t\t\t\t\t<div class='inner_pair'>{{string}}</div>\t\t\t\t</td>"});nsPrefs={nsConst:{},Preference:function(a,b,c){var d=null;this.fGet=function(){return null!=d?d:a};this.fSet=function(a){d=a}}};nsPrefs.oAutomaticSearch=new nsPrefs.Preference(!0,"Long searches are started automatically, rather than by button press");nsPrefs.nsConst.BAR_GRAPHS=0;nsPrefs.nsConst.PIE_GRAPHS=1;nsPrefs.oGraphType=new nsPrefs.Preference(nsPrefs.nsConst.PIE_GRAPHS,"Pie charts are yummy.");var nsRange={},slanskyRanges=[[],["AA","KK","QQ","JJ","AKs"],["TT","AQs","AJs","KQs","AKo"],"99 ATs KJs QJs JTs AQo".split(" "),"88 KTs QTs J9s T9s 98s AJo KQo".split(" "),"77 A9s A8s A7s A6s A5s A4s A3s A2s Q9s T8s 97s 87s 76s KJo QJo JTo".split(" "),"66 55 K9s J8s 86s 75s 65s 54s ATo KTo QTo".split(" "),"44 33 22 K8s K7s K6s K5s K4s K3s K2s Q8s T7s 64s 43s 53s J9o T9o 98o".split(" "),"J7s 96s 85s 74s 42s 32s A9o K9o Q9o J8o T8o 87o 76o 65o 54o".split(" ")],fGetSlanskyFromPercent=function(a){for(var b=
[],c=0,d=1;d<slanskyRanges.length;d++)for(var e=0;e<slanskyRanges[d].length;e++){var f=slanskyRanges[d][e],g=fGetCardPairFromString(f),c=c+g.comb;if(c/TOTAL_STARTING_COMBINATIONS<a)b=fPushArrayMultiDim(b,f);else return b}return b},range={aStatData:[]};range.aStatData.push({sPair:"AA",flEq:2.32,iSampleSize:550632});range.aStatData.push({sPair:"KK",flEq:1.67,iSampleSize:551878});range.aStatData.push({sPair:"QQ",flEq:1.22,iSampleSize:549570});range.aStatData.push({sPair:"JJ",flEq:0.86,iSampleSize:550948});
range.aStatData.push({sPair:"AKs",flEq:0.77,iSampleSize:367870});range.aStatData.push({sPair:"AQs",flEq:0.59,iSampleSize:368178});range.aStatData.push({sPair:"TT",flEq:0.58,iSampleSize:550156});range.aStatData.push({sPair:"AK",flEq:0.51,iSampleSize:1106047});range.aStatData.push({sPair:"AJs",flEq:0.43,iSampleSize:367811});range.aStatData.push({sPair:"KQs",flEq:0.39,iSampleSize:366191});range.aStatData.push({sPair:"99",flEq:0.38,iSampleSize:552062});range.aStatData.push({sPair:"ATs",flEq:0.33,iSampleSize:367393});
range.aStatData.push({sPair:"AQ",flEq:0.31,iSampleSize:1101249});range.aStatData.push({sPair:"KJs",flEq:0.29,iSampleSize:365921});range.aStatData.push({sPair:"88",flEq:0.25,iSampleSize:550710});range.aStatData.push({sPair:"QJs",flEq:0.23,iSampleSize:368213});range.aStatData.push({sPair:"KTs",flEq:0.2,iSampleSize:368086});range.aStatData.push({sPair:"AJ",flEq:0.19,iSampleSize:1103946});range.aStatData.push({sPair:"A9s",flEq:0.18,iSampleSize:368279});range.aStatData.push({sPair:"QTs",flEq:0.17,iSampleSize:365398});
range.aStatData.push({sPair:"KQ",flEq:0.16,iSampleSize:1103231});range.aStatData.push({sPair:"77",flEq:0.16,iSampleSize:553492});range.aStatData.push({sPair:"JTs",flEq:0.15,iSampleSize:367811});range.aStatData.push({sPair:"A8s",flEq:0.1,iSampleSize:368982});range.aStatData.push({sPair:"K9s",flEq:0.09,iSampleSize:367736});range.aStatData.push({sPair:"A7s",flEq:0.08,iSampleSize:369231});range.aStatData.push({sPair:"A5s",flEq:0.08,iSampleSize:367900});range.aStatData.push({sPair:"AT",flEq:0.08,iSampleSize:1105376});
range.aStatData.push({sPair:"KJ",flEq:0.07,iSampleSize:1105604});range.aStatData.push({sPair:"66",flEq:0.07,iSampleSize:549696});range.aStatData.push({sPair:"Q9s",flEq:0.06,iSampleSize:367923});range.aStatData.push({sPair:"A4s",flEq:0.06,iSampleSize:367553});range.aStatData.push({sPair:"T9s",flEq:0.05,iSampleSize:367750});range.aStatData.push({sPair:"J9s",flEq:0.04,iSampleSize:369223});range.aStatData.push({sPair:"QJ",flEq:0.03,iSampleSize:1102901});range.aStatData.push({sPair:"A6s",flEq:0.03,iSampleSize:366998});
range.aStatData.push({sPair:"55",flEq:0.02,iSampleSize:550840});range.aStatData.push({sPair:"A3s",flEq:0.02,iSampleSize:367269});range.aStatData.push({sPair:"KT",flEq:0.01,iSampleSize:1103705});range.aStatData.push({sPair:"K8s",flEq:0.01,iSampleSize:369893});range.aStatData.push({sPair:"A2s",flEq:0,iSampleSize:366466});range.aStatData.push({sPair:"T8s",flEq:0,iSampleSize:366732});range.aStatData.push({sPair:"K7s",flEq:0,iSampleSize:367647});range.aStatData.push({sPair:"98s",flEq:0,iSampleSize:368190});
range.aStatData.push({sPair:"87s",flEq:-0.02,iSampleSize:367787});range.aStatData.push({sPair:"QT",flEq:-0.02,iSampleSize:1106012});range.aStatData.push({sPair:"Q8s",flEq:-0.02,iSampleSize:367657});range.aStatData.push({sPair:"76s",flEq:-0.03,iSampleSize:367110});range.aStatData.push({sPair:"A9",flEq:-0.03,iSampleSize:1105684});range.aStatData.push({sPair:"J8s",flEq:-0.03,iSampleSize:367615});range.aStatData.push({sPair:"JT",flEq:-0.03,iSampleSize:1102233});
range.aStatData.push({sPair:"44",flEq:-0.03,iSampleSize:552443});range.aStatData.push({sPair:"97s",flEq:-0.04,iSampleSize:369494});range.aStatData.push({sPair:"K6s",flEq:-0.04,iSampleSize:366407});range.aStatData.push({sPair:"T7s",flEq:-0.05,iSampleSize:367201});range.aStatData.push({sPair:"K5s",flEq:-0.05,iSampleSize:368807});range.aStatData.push({sPair:"K4s",flEq:-0.05,iSampleSize:368061});range.aStatData.push({sPair:"Q7s",flEq:-0.06,iSampleSize:367512});
range.aStatData.push({sPair:"65s",flEq:-0.07,iSampleSize:367986});range.aStatData.push({sPair:"33",flEq:-0.07,iSampleSize:551586});range.aStatData.push({sPair:"K9",flEq:-0.07,iSampleSize:1103920});range.aStatData.push({sPair:"86s",flEq:-0.07,iSampleSize:367805});range.aStatData.push({sPair:"A8",flEq:-0.07,iSampleSize:1100445});range.aStatData.push({sPair:"J7s",flEq:-0.07,iSampleSize:364541});range.aStatData.push({sPair:"54s",flEq:-0.08,iSampleSize:367333});
range.aStatData.push({sPair:"K2s",flEq:-0.08,iSampleSize:368737});range.aStatData.push({sPair:"J9",flEq:-0.08,iSampleSize:1102303});range.aStatData.push({sPair:"Q6s",flEq:-0.08,iSampleSize:368294});range.aStatData.push({sPair:"Q9",flEq:-0.08,iSampleSize:1107991});range.aStatData.push({sPair:"K3s",flEq:-0.08,iSampleSize:368321});range.aStatData.push({sPair:"T9",flEq:-0.08,iSampleSize:1103441});range.aStatData.push({sPair:"96s",flEq:-0.09,iSampleSize:369159});
range.aStatData.push({sPair:"64s",flEq:-0.09,iSampleSize:369101});range.aStatData.push({sPair:"75s",flEq:-0.09,iSampleSize:369303});range.aStatData.push({sPair:"Q5s",flEq:-0.09,iSampleSize:369538});range.aStatData.push({sPair:"22",flEq:-0.09,iSampleSize:553171});range.aStatData.push({sPair:"T8",flEq:-0.09,iSampleSize:1107310});range.aStatData.push({sPair:"J8",flEq:-0.1,iSampleSize:1104552});range.aStatData.push({sPair:"Q4s",flEq:-0.1,iSampleSize:368471});
range.aStatData.push({sPair:"98",flEq:-0.1,iSampleSize:1103082});range.aStatData.push({sPair:"T7",flEq:-0.1,iSampleSize:1103171});range.aStatData.push({sPair:"A7",flEq:-0.1,iSampleSize:1104965});range.aStatData.push({sPair:"97",flEq:-0.1,iSampleSize:1104506});range.aStatData.push({sPair:"T6",flEq:-0.11,iSampleSize:1101165});range.aStatData.push({sPair:"Q3s",flEq:-0.11,iSampleSize:367390});range.aStatData.push({sPair:"J5s",flEq:-0.11,iSampleSize:368354});
range.aStatData.push({sPair:"K8",flEq:-0.11,iSampleSize:1106439});range.aStatData.push({sPair:"K7",flEq:-0.11,iSampleSize:1101741});range.aStatData.push({sPair:"86",flEq:-0.11,iSampleSize:1105837});range.aStatData.push({sPair:"53s",flEq:-0.11,iSampleSize:366243});range.aStatData.push({sPair:"85",flEq:-0.11,iSampleSize:1106745});range.aStatData.push({sPair:"85s",flEq:-0.11,iSampleSize:367456});range.aStatData.push({sPair:"63s",flEq:-0.11,iSampleSize:365732});
range.aStatData.push({sPair:"76",flEq:-0.11,iSampleSize:1105164});range.aStatData.push({sPair:"Q8",flEq:-0.11,iSampleSize:1106395});range.aStatData.push({sPair:"75",flEq:-0.11,iSampleSize:1105498});range.aStatData.push({sPair:"J4s",flEq:-0.11,iSampleSize:366906});range.aStatData.push({sPair:"74s",flEq:-0.11,iSampleSize:369655});range.aStatData.push({sPair:"J6s",flEq:-0.11,iSampleSize:366958});range.aStatData.push({sPair:"T6s",flEq:-0.11,iSampleSize:368322});
range.aStatData.push({sPair:"96",flEq:-0.12,iSampleSize:1105092});range.aStatData.push({sPair:"A5",flEq:-0.12,iSampleSize:1104643});range.aStatData.push({sPair:"95",flEq:-0.12,iSampleSize:1102769});range.aStatData.push({sPair:"95s",flEq:-0.12,iSampleSize:368015});range.aStatData.push({sPair:"94",flEq:-0.12,iSampleSize:1105939});range.aStatData.push({sPair:"53",flEq:-0.12,iSampleSize:1105251});range.aStatData.push({sPair:"93",flEq:-0.12,iSampleSize:1104310});
range.aStatData.push({sPair:"J7",flEq:-0.12,iSampleSize:1105297});range.aStatData.push({sPair:"92",flEq:-0.12,iSampleSize:1107579});range.aStatData.push({sPair:"87",flEq:-0.12,iSampleSize:1103007});range.aStatData.push({sPair:"Q7",flEq:-0.12,iSampleSize:1104331});range.aStatData.push({sPair:"J6",flEq:-0.12,iSampleSize:1104704});range.aStatData.push({sPair:"K6",flEq:-0.12,iSampleSize:1103401});range.aStatData.push({sPair:"T5",flEq:-0.12,iSampleSize:1107072});
range.aStatData.push({sPair:"T5s",flEq:-0.12,iSampleSize:368030});range.aStatData.push({sPair:"84",flEq:-0.12,iSampleSize:1104856});range.aStatData.push({sPair:"83",flEq:-0.12,iSampleSize:1106532});range.aStatData.push({sPair:"62",flEq:-0.12,iSampleSize:1107570});range.aStatData.push({sPair:"82",flEq:-0.12,iSampleSize:1101727});range.aStatData.push({sPair:"Q2s",flEq:-0.12,iSampleSize:368355});range.aStatData.push({sPair:"T3",flEq:-0.12,iSampleSize:1102033});
range.aStatData.push({sPair:"T2",flEq:-0.12,iSampleSize:1105503});range.aStatData.push({sPair:"42",flEq:-0.12,iSampleSize:1101359});range.aStatData.push({sPair:"52",flEq:-0.12,iSampleSize:1107694});range.aStatData.push({sPair:"74",flEq:-0.12,iSampleSize:1101551});range.aStatData.push({sPair:"A4",flEq:-0.12,iSampleSize:1104763});range.aStatData.push({sPair:"73",flEq:-0.12,iSampleSize:1105302});range.aStatData.push({sPair:"63",flEq:-0.12,iSampleSize:1103080});
range.aStatData.push({sPair:"72",flEq:-0.12,iSampleSize:1104285});range.aStatData.push({sPair:"A6",flEq:-0.12,iSampleSize:1105125});range.aStatData.push({sPair:"65",flEq:-0.12,iSampleSize:1104700});range.aStatData.push({sPair:"64",flEq:-0.12,iSampleSize:1101489});range.aStatData.push({sPair:"T4",flEq:-0.12,iSampleSize:1106174});range.aStatData.push({sPair:"Q4",flEq:-0.13,iSampleSize:1103742});range.aStatData.push({sPair:"84s",flEq:-0.13,iSampleSize:368694});
range.aStatData.push({sPair:"K5",flEq:-0.13,iSampleSize:1105669});range.aStatData.push({sPair:"Q3",flEq:-0.13,iSampleSize:1106081});range.aStatData.push({sPair:"Q6",flEq:-0.13,iSampleSize:1105012});range.aStatData.push({sPair:"Q2",flEq:-0.13,iSampleSize:1104650});range.aStatData.push({sPair:"43s",flEq:-0.13,iSampleSize:368525});range.aStatData.push({sPair:"J5",flEq:-0.13,iSampleSize:1105844});range.aStatData.push({sPair:"43",flEq:-0.13,iSampleSize:1106577});
range.aStatData.push({sPair:"J4",flEq:-0.13,iSampleSize:1106654});range.aStatData.push({sPair:"A3",flEq:-0.13,iSampleSize:1105722});range.aStatData.push({sPair:"T4s",flEq:-0.13,iSampleSize:370150});range.aStatData.push({sPair:"54",flEq:-0.13,iSampleSize:1104529});range.aStatData.push({sPair:"J3",flEq:-0.13,iSampleSize:1104433});range.aStatData.push({sPair:"K4",flEq:-0.13,iSampleSize:1104957});range.aStatData.push({sPair:"J3s",flEq:-0.13,iSampleSize:368616});
range.aStatData.push({sPair:"J2",flEq:-0.13,iSampleSize:1103759});range.aStatData.push({sPair:"Q5",flEq:-0.13,iSampleSize:1106053});range.aStatData.push({sPair:"T3s",flEq:-0.13,iSampleSize:369188});range.aStatData.push({sPair:"J2s",flEq:-0.14,iSampleSize:367858});range.aStatData.push({sPair:"T2s",flEq:-0.14,iSampleSize:369195});range.aStatData.push({sPair:"62s",flEq:-0.14,iSampleSize:367206});range.aStatData.push({sPair:"92s",flEq:-0.14,iSampleSize:367488});
range.aStatData.push({sPair:"93s",flEq:-0.14,iSampleSize:368278});range.aStatData.push({sPair:"73s",flEq:-0.14,iSampleSize:368640});range.aStatData.push({sPair:"82s",flEq:-0.14,iSampleSize:368039});range.aStatData.push({sPair:"52s",flEq:-0.14,iSampleSize:367876});range.aStatData.push({sPair:"K2",flEq:-0.14,iSampleSize:1106898});range.aStatData.push({sPair:"K3",flEq:-0.14,iSampleSize:1104211});range.aStatData.push({sPair:"42s",flEq:-0.14,iSampleSize:369977});
range.aStatData.push({sPair:"32",flEq:-0.14,iSampleSize:1103272});range.aStatData.push({sPair:"83s",flEq:-0.15,iSampleSize:368814});range.aStatData.push({sPair:"72s",flEq:-0.15,iSampleSize:368039});range.aStatData.push({sPair:"94s",flEq:-0.15,iSampleSize:367617});range.aStatData.push({sPair:"A2",flEq:-0.15,iSampleSize:1106519});range.aStatData.push({sPair:"32s",flEq:-0.16,iSampleSize:369182});
var fGetStatisticalFromPercent=function(a){for(var b=[],c=0,d=0,e=0;e<range.aStatData.length;e++){var f=range.aStatData[e].sPair,g=fGetCardPairFromString(f),c=c+g.comb;!1==g.suited&&g.rank1!=g.rank2&&(f=f[0]+f[1]+"o");if(c/TOTAL_STARTING_COMBINATIONS<=a)b.push(f),d=range.aStatData[e].flEq;else if(d==range.aStatData[e].flEq)b.push(f);else break}return b};nsRange.aCurrentWorkers=[];
nsRange.fKillCurrentWorkers=function(){for(var a=0;a<nsRange.aCurrentWorkers.length;a++)nsRange.aCurrentWorkers[a].terminate(),nsRange.aCurrentWorkers[a]=null;nsRange.aCurrentWorkers=[]};
nsRange.fGetAllUnknownCombinationsThreaded=function(){$(".no_results").remove();var a=0;if("undefined"==typeof Worker)alert("Browser must support webworkers!");else{nsRange.fKillCurrentWorkers();var b=nsRange.fGetStartingHandsFromRangeGrid(),c=nsUI.fGetKnownCards(),d=fGetAllUnknownCards(),e=nsUI.fGetBoardCards(),f=7-c.length,g={iCountWon:0,iCountLost:0,iCountDraw:0,total:0},h={},k={},n=function(b){var l=new Worker("js/"+(DEV_VERSION?"worker.js":"worker.min.js"));nsRange.aCurrentWorkers.push(l);l.addEventListener("message",
function(b){"progress"===b.data.type&&(c=100*(b.data.msg.iCountWon/b.data.msg.total)*b.data.msg.currentPercent,e=100*(b.data.msg.iCountDraw/b.data.msg.total)*b.data.msg.currentPercent,d=100*(b.data.msg.iCountLost/b.data.msg.total)*b.data.msg.currentPercent,$("#win_percent_bar div").each(function(a){0==a&&$(this).css("width",c+"%");1==a&&$(this).css("width",e+"%");2==a&&$(this).css("width",d+"%")}));"console"===b.data.type&&nsUtil.fLog(b.data.msg);if("done"===b.data.type&&(a++,b=b.data.msg,g.iCountWon+=
b.iCountWon,g.iCountLost+=b.iCountLost,g.iCountDraw+=b.iCountDraw,g.total+=b.total,h=fCombineObjects(b.oHeroStat,h,function(a,b){"undefined"==typeof a&&(a={lossCount:0,wonCount:0,drawCount:0});"undefined"==typeof b&&(b={lossCount:0,wonCount:0,drawCount:0});return fCombineObjects(a,b,function(a,b){return a+b})}),k=fCombineObjects(b.oVillainStat,k,function(a,b){"undefined"==typeof a&&(a={lossCount:0,wonCount:0,drawCount:0});"undefined"==typeof b&&(b={lossCount:0,wonCount:0,drawCount:0});return fCombineObjects(a,
b,function(a,b){return a+b})}),4==a)){$("#win_percent_bar").trigger("done");var c=100*(g.iCountWon/g.total),d=100*(g.iCountLost/g.total),e=100*(g.iCountDraw/g.total);nsUtil.fLog("total win count: "+g.iCountWon+" total loss count: "+g.iCountLost+" total draw count: "+q+g.iCountDraw);nsUtil.fLog("total win %: "+c+" total loss %: "+d+" total draw %: "+e);if(0==g.total)$("#hero_stat").html('<strong class="no_results">All results filtered out.</strong>'),$("#villain_stat").html('<strong class="no_results">All results filtered out.</strong>'),
$("#textures").html('<strong class="no_results">All results filtered out.</strong>');else if(nsHtml.fSetMainStatBar(c,e,d),b=nsPrefs.oGraphType.fGet(),b==nsPrefs.nsConst.BAR_GRAPHS){b=""+nsHtml.fGetResultStatHtml(h,g);var f;f=""+nsHtml.fGetResultStatHtml(k,g);$("#hero_stat").html(b);$("#villain_stat").html(f);nsHtml.fInitResultPopovers()}else b==nsPrefs.nsConst.PIE_GRAPHS&&(nsHtml.fDrawResultsStatPie(h,g,"hero_stat"),nsHtml.fDrawResultsStatPie(k,g,"villain_stat"))}},!1);l.postMessage({cmd:"start",
msg:"",aoStartingHands:b,aKnownCards:c,aUnknownCards:d,numberOfOpenBoardHandPlaces:f,aFixedBoardCards:e,oFilter:nsFilter.oFilterRecord,bMin:!DEV_VERSION})};$("#win_percent_bar").trigger("start");var l=b.length,p=Math.floor(l/4)+1;nsUtil.fLog("start hand length "+l);for(var q=0;4>q;q++){var l=0==q?0:q*p,m=l+p,r=b.slice(l,m);n(r);nsUtil.fLog("worker start hand start index "+l+" end index "+m)}}};
nsRange.fGetTextures=function(){if("undefined"==typeof Worker)alert("Browser must support webworkers!");else{$(".no_results").remove();var a=nsRange.fGetStartingHandsFromRangeGrid(),b=nsUI.fGetKnownCards(),c=nsUI.fGetBoardCards(),d=nsFilter.fActiveFilter(null,!0);(function(){var e=new Worker("js/"+(window.DEV_VERSION?"workerTextures.js":"workerTextures.min.js"));e.addEventListener("message",function(a){"console"===a.data.type&&nsUtil.fLog(a.data.msg);if("done"===a.data.type){a=a.data.msg;var b=nsPrefs.oGraphType.fGet();
nsFilter.fClearFilter();nsFilter.fDrawFilterToBoard(a.oFilterRecord);b==nsPrefs.nsConst.BAR_GRAPHS?(b=nsHtml.fGetTextureHtml(a),$("#textures").html(b),nsHtml.fSetupTextureHover(a)):b==nsPrefs.nsConst.PIE_GRAPHS&&nsHtml.fDrawTexturPie(a)}},!1);e.postMessage({cmd:"start",msg:"",aoStartingHands:a,aKnownCards:b,aFixedBoardCards:c,oFilter:d,bMin:!DEV_VERSION})})()}};var fGetStartingHandStrings=function(){var a=[];$("#op_range_table .selected>.inner_pair").each(function(){a.push($(this).html())});return a};
nsRange.fGetStartingHandsFromRangeGrid=function(a){var b=[],c="#op_range_table td.selected";!0===a&&(c="#op_range_table td");$(c).each(function(){var a=$(this).attr("id").split("_")[2],c=fGetCardPairFromString(a,!0),f=nsConvert.fGetCardArrayFromPair(c);b.push({oPair:c,aPair:f,sPair:a})});return b};
var fGetAllUnknownCards=function(){for(var a=fGetAllCards(),b=nsUI.fGetKnownCards(),c=[],d=0;d<a.length;d++){for(var e=!1,f=0;f<b.length;f++)fIdenticalCards(a[d],b[f])&&(e=!0);e||c.push(a[d])}return c},fIdenticalCards=function(a,b){return a.rank==b.rank&&a.suit==b.suit};var RangeItem=AWModel.extend({className:"RangeItem",defaults:{filter:[],selected:!1,custom:!1},initialize:function(a){this.set("pair",new Pair(a.pair));for(var b in a.pair)this.set(b,a.pair[b]);this.set("key",this.get("pair").toString())},safeSetSelected:function(a){this.get("custom")||this.set("selected",a)}}),RangeItemList=AWCollection.extend({className:"RangeRecordList",model:RangeItem}),RangeItemListModel=AWCollectionModel.extend({className:"RangeItemListModel",collection:RangeItemList}),RangeTable=
RangeItemList.extend({className:"RangeTable",initialize:function(){for(rank1=14;1<rank1;rank1--)for(rank2=14;1<rank2;rank2--)this.add({pair:{rank1:rank1,rank2:rank2,suited:rank1>rank2}});this.amChanged=[];this.on("change",function(a){this.amChanged.push(a)});this.on("finalize",function(){this.trigger("updateModels",this.amChanged);this.amChanged=[]})},listenToSlider:function(a){this.listenTo(a,"change:value",function(){this.fSetFromRangeFunction(a)});this.listenTo(a,"finalize",function(){this.trigger("finalize")})},
lastRangeVal:0,fSetFromRangeFunction:function(a){var b=a.get("value");a=a.get("fRangeFunction")(b/100);nsUtil.fLog("calling range function");for(var c=this.where({selected:!0}),d=0;d<c.length;d++)c[d].safeSetSelected(!1);for(d=0;d<a.length;d++)this.findPairString(a[d]).safeSetSelected(!0);this.lastRangeVal=b},rangeItemAt:function(a,b){return _.isUndefined(b)?this.find({rank1:a}):this.findWhere({rank1:a,rank2:b})},tableLoop:function(a,b){for(rank1=14;1<rank1;rank1--)for(a(this.rangeItemAt(rank1,rank2)),
rank2=14;1<rank2;rank2--)b(this.rangeItemAt(rank1,rank2))},findPairString:function(a){var b=null;this.forEach(function(c){if(c.get("key")==a)return b=c,!1});return b}}),RangeTableView=AWView.extend({tagName:"table",className:"table",id:"op_range_table",parent:"op_range",currentRangeItemView:null,initialize:function(){var a=this.renderData;this.model.tableLoop(function(b){a.row.push([])},function(b){this.currentRangeItemView?this.currentRangeItemView.setModel(b):this.currentRangeItemView=new RangeItemView({model:b});
a.row[a.row.length-1].push({innerHtml:this.currentRangeItemView.render(),id:this.currentRangeItemView.idPrefix()+this.currentRangeItemView.id(),sClass:this.currentRangeItemView.className()})});this.render();this.listenTo(this.model,"change",function(a){this.currentRangeItemView?this.currentRangeItemView.setModel(a):this.currentRangeItemView=new RangeItemView({model:a});this.currentRangeItemView.render()})},events:{"mousedown td":"handleMousedown"},modelFromTD:function(a){a=$(a).attr("id").split("_")[2];
return this.model.findPairString(a)},handleMouseEnterDragging:function(a){this.bWasSimpleClick=!1;a=this.modelFromTD(a.currentTarget);a.get(selected);a.set("selected",!this.bOriginalSelected);a.toggle("custom");this.fFixCustomBorders()},handleMousedown:function(a){a=a.currentTarget;var b=this,c=this.modelFromTD(a);bNewVal=c.toggle("selected");c.toggle("custom");this.bOriginalSelected=!bNewVal;this.bWasSimpleClick=!0;this.$("td").on("mouseenter",function(a){b.bWasSimpleClick=!1;a=b.modelFromTD(a.currentTarget);
var c=a.get("selected"),f=!b.bOriginalSelected;a.set("selected",f);c!=f&&a.toggle("custom");b.fFixCustomBorders()});$(a).one("mouseup",function(){b.bWasSimpleClick&&b.model.trigger("finalize");b.fFixCustomBorders()});$("body").one("mouseup",function(){b.$("td").off("mouseenter");b.bWasSimpleClick||b.model.trigger("finalize")});b.fFixCustomBorders()},fFixCustomBorders:function(){this.$("td").removeClass("nbr nbl nbt nbb");this.$("td.custom").each(function(){var a=$(this),b=a.index(),c=a.parent(),d=
a.next(),e=a.prev(),f=c.prev().children().eq(b),b=c.next().children().eq(b);d.is(".custom")&&(a.addClass("nbr"),d.addClass("nbl"));e.is(".custom")&&(a.addClass("nbl"),e.addClass("nbr"));f.is(".custom")&&(a.addClass("nbt"),f.addClass("nbb"));b.is(".custom")&&(a.addClass("nbb"),b.addClass("nbt"))})},render:function(){var a=Mustache.render(this.template,this.renderData);this.el.innerHTML=a;$(Mustache.render("#{{.}}",this.parent)).append(this.el)},renderData:{"class":_.isFunction(this.className)?this.className():
this.className,id:this.id,row:[]},template:"<table id='{{id}}' class='{{class}}'>\t\t\t\t\t<tbody>\t\t\t\t\t\t{{#row}}\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t\t{{#.}}\t\t\t\t\t\t\t\t\t<td id='{{id}}' class='{{sClass}}'>\t\t\t\t\t\t\t\t\t{{{innerHtml}}}\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t{{/.}}\t\t\t\t\t\t</tr>\t\t\t\t\t\t{{/row}}\t\t\t\t\t</tbody>\t\t\t\t</table>"}),RangeItemView=AWView.extend({setModel:function(a){this.model=a;a=$(Mustache.render("#{{.}}",this.idPrefix()+this.id()));_.isElement(a[0])&&
(this.el=a[0],this.$el=a)},initialize:function(a){this.setModel(a.model);this.compiledTemplate=Mustache.compile(this.template)},tagName:"td",className:function(){var a=[],b="offsuit",c=this.model.get("pair");c.bPPair()?b="pPair":c.get("suited")&&(b="suit");a.push(b);this.model.get("selected")&&a.push("selected");this.model.get("custom")&&a.push("custom");return a.join(" ")},render:function(){var a=this.renderData(),a=this.compiledTemplate(a);this.el.innerHTML=a;var b=this.className();this.el.className=
b;return a},id:function(){return this.model.get("pair").toString()},idPrefix:function(){return"op_range_"},renderData:function(){return{"class":this.className(),id:this.id(),id_prefix:this.idPrefix(),string:this.id()}},template:"<div class='pair_wrapper'>\t\t\t\t<div class='static_bg'>&nbsp;</div>\t\t\t\t<div class='inner_pair'>{{string}}</div>"});var TableRouter=Backbone.Router.extend({routes:{help:"help","slider=(:value)":"slider","beer/:query/p:page":"search"},help:function(){},slider:function(a){window.flopYoMama.slider.trigger("loadFromRoute",a)}});nsModel={};
var Silder=Backbone.Model.extend({defaults:{value:27,fRangeFunction:fGetSlanskyFromPercent,max:50,min:0},initialize:function(){this.on("change:value",function(){var a=this.get("value");a>this.max?this.set({value:this.max}):a<this.min&&this.set({value:this.min})});this.on("finalize",function(a){_.isNull(a)&&(a=this.get("value"));nsUtil.fSetLocalStorage("range_slider_val",a);this.trigger("change:value");this.set({value:a})});this.on("loadFromRoute",function(a){_.isNull(a)&&(a=nsUtil.fGetLocalStorage("range_slider_val"),null!=
a&&this.set({value:a}),this.get("value"))})}});
SliderView=Backbone.View.extend({initialize:function(){var a=this;this.$el.slider({change:function(b,c){a.model.trigger("finalize",c.value)},slide:function(b,c){a.model.set({value:c.value})},max:a.model.get("max"),min:a.model.get("min"),value:a.model.get("value")});this.listenTo(this.model,"change:value",this.render);this.on("update",this.update);this.handle=$(".range_slider_bg").parent().find("a")[0];this.handleParent=$(this.handle).parent()[0];this.bg=$(".range_slider_bg")[0];this.render()},handle:null,
handleParent:null,bg:null,render:function(){var a=100-parseFloat(this.handle.style.left)+"%";this.bg.style.right=a},update:function(){this.$el.slider("value",this.model.get("value"));this.render();nsUtil.fLog("manual SET trigger with value "+this.model.get("value"))}});var RANK_CODES={};for(i=50;58>i;i++)RANK_CODES[i]=i-48;RANK_CODES[84]="T";RANK_CODES[74]="J";RANK_CODES[81]="Q";RANK_CODES[75]="K";RANK_CODES[65]="A";
var SUIT_CODES={67:"\u2663",68:"\u2666",72:"\u2665",83:"\u2660"},BACKSPACE_CODE=8,DELETE_CODE=46,TAB_CODE=9,LEFT_ARROW=37,RIGHT_ARROW=39,nsUI={fHandleKeyPress:function(a,b){var c=b.srcElement||b.target,d=!1;if(("INPUT"!==c.tagName.toUpperCase()||"TEXT"!==c.type.toUpperCase()&&"PASSWORD"!==c.type.toUpperCase()&&"FILE"!==c.type.toUpperCase())&&"TEXTAREA"!==c.tagName.toUpperCase()&&"BUTTON"!==c.tagName.toUpperCase()){a!==TAB_CODE&&a!==RIGHT_ARROW||nsUI.fSelectNext();a===LEFT_ARROW&&nsUI.fSelectPrev();
a===BACKSPACE_CODE&&(nsUI.fDeleteSelected()?d=!0:nsUI.fSelectPrev(),b.preventDefault());a===DELETE_CODE&&(nsUI.fDeleteSelected(),b.stopPropagation(),d=!0);if("undefined"!=typeof RANK_CODES[a]){var c=$(".btn.selected>span"),e=c.html(),e=""+RANK_CODES[a]+e[1];c.html(e)}else if("undefined"!=typeof SUIT_CODES[a]){c=$(".btn.selected>span");e=c.html();if(e[0]===EMPTY_CARD_STRING)return;e=""+e[0]+SUIT_CODES[a];nsUI.fValidateKeypress(e)&&(c.parent().html(nsHtml.fWrapCard(e)),nsUI.fSelectNext(),d=!0)}d&&nsUI.fAfterBoardChange()}},
fAfterBoardChange:function(){nsHtml.fRedrawBoardSelectionTable();nsUI.fEvaluateKnownCards();nsUI.fSaveBoardState()},fValidateKeypress:function(a){a=fConvertCardStringToCardObject(a);var b=nsUI.fGetKnownCards(),c=$(".btn.selected>span").html(),c=fConvertCardStringToCardObject(c);if(fIdenticalCards(a,c))return!0;for(c=0;c<b.length;c++)if(fIdenticalCards(a,b[c]))return!1;return!0},fDeleteSelected:function(){var a=$(".btn.selected>span"),b=!0;a.html()===EMPTY_CARD_STRING&&(b=!1);a.parent().html(EMPTY_CARD_WRAPPED);
b&&nsUI.fSaveBoardState();return b},fDeleteBoard:function(a){var b;"number"==nsUtil.fType(a)?(b=$(".known.btn").eq(a),b.html(EMPTY_CARD_WRAPPED)):"string"==nsUtil.fType(a)?$(".known.btn>span").each(function(){$(this).html()==a&&$(this).parent().html(EMPTY_CARD_WRAPPED)}):"undefined"==typeof a&&($(".known.btn").html(EMPTY_CARD_WRAPPED),nsUI.fSelectKnown(0));nsUI.fSaveBoardState()},fSaveBoardState:function(){var a=[];for(i=0;7>i;i++){var b=$("#known_"+(i+1)).html();a.push(b)}nsUtil.fSetLocalStorage("board_array",
a)},fRestoreBoard:function(){var a=nsUtil.fGetLocalStorage("board_array");if(null!=a)for(var b=0;7>b;b++){var c=a[b];$("#known_"+(b+1)).html(c)}},fSetBoardCard:function(a){if("array"!=nsUtil.fType(a)){if("string"==nsUtil.fType(a)&&2===a.length||"object"==nsUtil.fType(a)){var b=$(".btn.selected>span"),c=b.html();b.parent().html(nsHtml.fWrapCard(a));return c}b=a.length/2;for(c=0;c<b;c++)nsUI.fSetBoardCard(a[2*c]+a[2*c+1]),nsUI.fSelectNext();nsUI.fSaveBoardState()}else for(c=0;c<a.length;c++)nsUI.fSetBoardCard(a[c]),
nsUI.fSelectNext()},fSelectKnown:function(a,b){"undefined"==typeof b&&(b=0);"number"==nsUtil.fType(a)?(iSelectedKnownCard=b,$(".known.btn").removeClass("selected active"),$(".known.btn").eq(a).addClass("selected active")):"string"==nsUtil.fType(a)&&$(".known>span").each(function(){$(this).html()==a&&($(".known.btn").removeClass("selected active"),$(this).parent().addClass("selected active"))})},fSelectNext:function(a){var b=$(".known.btn.selected").attr("id").split("_")[1];if(a)for(a=1;7>a;a++){if(b++,
7<b&&(b=1),$("#known_"+b+" span").html()==EMPTY_CARD_STRING){$(".known.btn").removeClass("selected active");$("#known_"+b).addClass("selected active");break}}else b++,7<b&&(b=1),nsUtil.fLog("current selected "+b),$(".known.btn").removeClass("selected active"),$("#known_"+b).addClass("selected active")},fSelectPrev:function(){var a=$(".known.btn.selected").attr("id").split("_")[1];a--;1>a&&(a=7);$(".known.btn").removeClass("selected active");$("#known_"+a).addClass("selected active")},fGetBoardCards:function(){var a=
[];$("#board .known span").each(function(){var b=$(this).html();b!=EMPTY_CARD_STRING&&a.push(fConvertCardStringToCardObject(b))});return a},fGetBoardState:function(){var a={bHand:!0,bFlop:!0,bTurn:!0,bRiver:!0};$("#known_1>span, #known_2>span").each(function(){if($(this).html()==EMPTY_CARD_STRING)return a.bHand=!1});$("#known_3>span, #known_4>span, #known_5>span").each(function(){if($(this).html()==EMPTY_CARD_STRING)return a.bFlop=!1});$("#known_6>span").html()==EMPTY_CARD_STRING&&(a.bTurn=!1);$("#known_7>span").html()==
EMPTY_CARD_STRING&&(a.bRiver=!1);return a},fEvaluateKnownCards:function(){var a=nsUI.fGetKnownCards(),b=nsUI.fGetBoardState();b.bFlop?nsRange.fGetTextures():$("#textures").html("");b.bFlop&&b.bHand&&nsPrefs.oAutomaticSearch.fGet()?nsRange.fGetAllUnknownCombinationsThreaded():nsUI.fDeleteLongStatistics();a=nsDrawingHand.fGetDrawingHands(a);nsUtil.fLog(nsDrawingHand.fHandToString(a))},fDeleteLongStatistics:function(){$("#hero_stat, #villain_stat").html("");nsUI.fSetWinPercentBarZero()},fSetWinPercentBarZero:function(){var a=
$("#win_percent_bar").children().first().css("transition");$(this).children().css("transition","none").css("-webkit-transition","none");$("#win_percent_bar").children().css("width","0px");setTimeout(function(){$("#win_percent_bar").children().css("transition",a).css("-webkit-transition",a)},1)}},EMPTY_CARD_STRING="__",EMPTY_CARD_WRAPPED='<span class="empty">__</span>';
nsUI.fGetKnownCards=function(){var a=[];$(".known span").each(function(){var b=$(this).html();b!=EMPTY_CARD_STRING&&a.push(fConvertCardStringToCardObject(b))});return a};nsUI.fToggleCheckableMenu=function(a,b){$(a).toggleClass("active");if($(a).hasClass("active"))return $(a).find("a").append('<span class = "glyphicon glyphicon-ok"></span>'),b&&$(a).siblings().removeClass("active").find(".glyphicon-ok").remove(),!0;$(a).find(".glyphicon-ok").remove();return!1};
nsUI.clBootstrapCombobox=function(a,b,c,d,e){sHtml='<div class="input-group" id ="'+a+'">';sHtml+='<div class="input-group-btn">';sHtml+='<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>';sHtml+='<ul class="dropdown-menu">';for(a=0;a<b.length;a++)sHtml+='<li id="'+b[a]+'"><a href="#">'+c[a]+"</a></li>";sHtml+="</ul>";sHtml+='<button type="button" class="validate btn btn-default dropdown-toggle" data-toggle="dropdown"></button>';
sHtml+="</ul>";sHtml+="</div>";sHtml+='<input type="text" class="form-control" placeholder="'+d+'">';return sHtml+="</div>"};
nsUI.fAddEventsToCombobox=function(a,b){$("#"+a+" .btn").click(function(){$("#"+a+" .input-group-btn").removeClass("open");$("#"+a+" li").css("display","block").removeClass("active");$("#"+a+" ul").css("left","0px")});$("#"+a).on("click","li",function(){$(this).attr("id");var c=$(this).children().first().html();$("#"+a+" input").val(c);$(this).addClass("active");$(this).siblings().removeClass("active");b()});var c=[],d=[],e=!1;$("#"+a+" input").keyup(function(f){e=!1;c=[];d=[];$("#"+a+" li").each(function(){var b=
$(this).find("a").html(),b=b.toLowerCase(),f=$("#"+a+" input").val().toLowerCase();b==f&&0<f.length?($(this).addClass("active"),$(this).siblings().removeClass("active"),e=!0):-1<b.indexOf(f)&&0<f.length?c.push(this):d.push(this)});e||(0<c.length?($("#"+a+" .input-group-btn").addClass("open"),f=$("#"+a+" input").position(),$(c).css("display","block"),$(d).css("display","none").removeClass("active"),$("#"+a+" ul").css("left",f.left+"px"),$("#"+a+" li").removeClass("active")):($("#"+a+" .input-group-btn").removeClass("open"),
$("#"+a+" li").css("display","block").removeClass("active"),$("#"+a+" ul").css("left","0px")));b()});$("#"+a+" input").keydown(function(b){(b.keyCode?b.keyCode:b.which)==TAB_CODE&&$("#"+a+" .input-group-btn").hasClass("open")&&(b=$(c[0]).find("a").html(),$(c[0]).addClass("activated"),$("#"+a+" input").val(b),$("#"+a+" .input-group-btn").removeClass("open"),nsUtil.fLog("autocomplete "+b),$(this).triggerHandler("keyup"))});"undefined"==typeof b&&(b=function(){var b=$("#"+a+" input").val(),c=$("#"+a).find(".validate");
if(""==b)return c.html('<span class="glyphicon glyphicon-remove"></span>'),!1;b==$("#"+a+" li.active a").html()?c.html('<span class="glyphicon glyphicon-ok"></span>'):c.html('<span class="glyphicon glyphicon-plus-sign"></span>');nsUtil.fLog("triggering validated");$("#"+a).trigger("validated");return!0});b()};var nsUtil={},fCombineObjects=function(a,b,c){var d={};for(prop in a)d[prop]=c(a[prop],b[prop]);for(prop in b)"undefined"==typeof a[prop]&&(d[prop]=c(a[prop],b[prop]));return d},fSortPropertiesOfObject=function(a,b){var c=[];for(prop in oVillainStat)c.push(prop)},TYPES={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},TOSTRING=Object.prototype.toString;
nsUtil.fType=function(a){return TYPES[typeof a]||TYPES[TOSTRING.call(a)]||(a?"object":"null")};nsUtil.fSetLocalStorage=function(a,b){var c;c="array"==nsUtil.fType(b)?JSON.stringify({json_array_data_conversion:b}):JSON.stringify(b);localStorage.setItem(a,c)};var isNot=function(a){return"undefined"==typeof a||null==a};nsUtil.fClone=function(a){return JSON.parse(JSON.stringify(a))};
nsUtil.fGetLocalStorage=function(a){a=localStorage.getItem(a);a=JSON.parse(a);return null!=a&&null!=a.json_array_data_conversion?a.json_array_data_conversion:a};nsUtil.oLogMask={maskVals:{A:1,B:2,C:4,D:8,E:16,F:32,G:64,H:128,I:256,J:512,K:1024},iMask:0,fActivateMask:function(a){this.iMask&a||(this.iMask|=a)},fDeactivateMask:function(a){this.iMask&a&&(this.iMask&=~a)},fCheck:function(a){return this.iMask&a?!0:!1}};nsUtil.fLog=function(a,b){nsUtil.oLogMask.fCheck(b)&&console.log(a)};
